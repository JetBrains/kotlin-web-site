<html>
<head>
<meta charset="utf-8">


<title>Creating a Kotlin JavaScript library with the Command Line Compiler - Kotlin Programming Language</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/kotlin-web-site-ja/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/kotlin-web-site-ja/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/kotlin-web-site-ja/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/kotlin-web-site-ja/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/kotlin-web-site-ja/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/kotlin-web-site-ja/_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="Creating a Kotlin JavaScript library with the Command Line Compiler - Kotlin Programming Language"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://kotlinlang.org/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.html"/>
<meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="This tutorial walks us through creating a Kotlin JavaScript library using the command line compiler.">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="Creating a Kotlin JavaScript library with the Command Line Compiler - Kotlin Programming Language">
    <meta name="twitter:description" content="This tutorial walks us through creating a Kotlin JavaScript library using the command line compiler.">
<meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->    <script src="/kotlin-web-site-ja/_assets/default.js"></script>
    <script src="/kotlin-web-site-ja/_assets/common.js"></script>
</head>
<body>
<!--Google Analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-88424767-1', 'auto');
  ga('send', 'pageview');

</script>
<!--/Google Analytics-->
<div class="global-layout">

<header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/kotlin-web-site-ja/">Kotlin</a>
<nav role="navigation" class="global-nav">

    <div class="nav-links">

            <a href="/kotlin-web-site-ja/docs/reference/"
               class="nav-item "
            >
                Learn
            </a>

            <a href="/kotlin-web-site-ja/contribute.html"
               class="nav-item "
            >
                Contribute
            </a>

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                Try Online
            </a>
    </div>


<div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div></nav>        </div>
    </div>

    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
    <div class="g-grid">

        <div class="g-12">
<nav role="navigation" class="docs-nav">
        <div class="nav-item-wrap">
                <a href="/kotlin-web-site-ja/docs/reference/" class="nav-item">
                    <span class="nav-item-text">
                        リファレンス
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/kotlin-web-site-ja/docs/tutorials/" class="nav-item is_active">
                        <span class="nav-item-text">
                            Tutorials
                        </span>
                </a>
        </div>
        <div class="nav-item-wrap">
                <a href="/kotlin-web-site-ja/docs/videos.html" class="nav-item">
                    <span class="nav-item-text">
                        Videos
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/kotlin-web-site-ja/docs/events.html" class="nav-item">
                    <span class="nav-item-text">
                        Events
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/kotlin-web-site-ja/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        More resources
                    </span>
                </a>

        </div>
</nav>        </div>

        <aside class="g-3">
            <div id="tutorials-nav">
                    <nav role="navigation" class="side-tree-nav">
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Getting Started">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Getting Started</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/getting-started.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Getting Started with IntelliJ IDEA</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/getting-started-eclipse.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Getting Started with Eclipse</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/command-line.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Working with the Command Line Compiler</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/build-tools.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Working with Build Tools</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/koans.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Koans</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Java Interop">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Java Interop</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/mixing-java-kotlin-intellij.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Mixing Java and Kotlin in one project</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _opened"
                 data-id="JavaScript">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">JavaScript</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/javascript/kotlin-to-javascript/kotlin-to-javascript.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin to JavaScript</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/javascript/getting-started-idea/getting-started-with-intellij-idea.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Getting Started with Kotlin and JavaScript with IntelliJ IDEA</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/javascript/working-with-modules/working-with-modules.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Working with Kotlin and JavaScript Modules</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                                <div class="marker"></div>
                                <div class="text">Creating a Kotlin JavaScript library with the Command Line Compiler</div>
                            </div>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/javascript/getting-started-maven/getting-started-with-maven.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Getting Started with Kotlin and JavaScript with Maven</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/javascript/getting-started-gradle/getting-started-with-gradle.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Getting Started with Kotlin and JavaScript with Gradle</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Web Development">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Web Development</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/httpservlets.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Creating Web Applications with Http Servlets</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/spring-boot-restful.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Creating a RESTful Web Service with Spring Boot</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Mobile">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Mobile</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/kotlin-android.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Getting Started With Android Development</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/android-plugin.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin Android Extensions</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Tools">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Tools</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/kotlin-web-site-ja/docs/tutorials/kotlin-and-ci.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Setting up Kotlin on TeamCity</span>
                            </a>
                    </div>

            </div>
    </nav>

            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/dogwood008/kotlin-web-site-ja/edit/master/pages/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>
            <h1>
                Creating a Kotlin JavaScript library with the Command Line Compiler
            </h1>
            <table>
            </table>
                This tutorial walks us through creating a Kotlin JavaScript library using the command line compiler.
                <br/>
                <br/>
            
<h3 id="creating-a-kotlinjavascript-library">Creating a Kotlin/JavaScript library</h3>
<p>We will create a simple Kotlin/JavaScript library.</p>
<ol>
<li>
<p>Using our favorite editor, we create a new file called <em>library.kt</em>:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">package org.sample
   
fun factorial(n: Int): Long = if (n == 0) 1 else n * factorial(n - 1)
   
inline fun IntRange.forOdd(f: (Int) -&gt; Unit) {
    this.forEach { if (it % 2 == 1) f(it) }
}
</code></pre>
</li>
<li>
<p>Compile the library using the JS compiler</p>
<pre><code>$ kotlinc-js -output sample-library.js -meta-info library.kt
</code></pre>
<p>The <code>-meta-info</code> option indicates that an additional JS file with binary
meta-information about compiled kotlin code will be created.</p>
<p>If you want to see all available options run</p>
<pre><code>$ kotlinc-js -help
</code></pre>
<p>After compilation we have two new files:</p>
<pre><code>sample-library.js
sample-library.meta.js
</code></pre>
</li>
<li>
<p>You can simply distribute two JS files, <code>sample-library.js</code> and <code>sample-library.meta.js</code>.
The former file contains translated JavaScript code, the latter file
contains some meta-information about Kotlin code, which is needed by compiler.</p>
<p>Alternatively, you can append the content of <code>sample-library.meta.js</code> to the end
of <code>sample-library.js</code> and distribute only the resulting file.</p>
<p>Also you can create an archive, which can be distributed as a library:</p>
<pre><code>$ jar cf sample-library.jar *.js
</code></pre>
</li>
</ol>
<h3 id="using-a-kotlinjavascript-library">Using a Kotlin/JavaScript library.</h3>
<p>Create binom.kt:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">import org.sample.factorial
    
fun binom(m: Int, n: Int): Long =
        if (m &lt; n) factorial(n) / factorial(m) / factorial(n-m) else 1
        
fun odd_factorial(n: Int): Long {
        var result: Long = 1L
        (1..n).forOdd { result = result * it }
        return result
}        
</code></pre>
<p>Compile with library:</p>
<pre><code>   $ kotlinc-js -output binom.js -library-files sample-library.meta.js binom.kt
</code></pre>
<p>Both files <code>sample-library.js</code> and <code>sample-library.meta.js</code> should be present in the latter case,
   because translated JavaScript file contains meta-information about inlining, which 
   is needed by compiler.</p>
<p>If you have an archive <code>sample-library.jar</code>, which contains <code>sample-library.js</code> and <code>sample-library.meta.js</code>,
   you can use the following command</p>
<pre><code>   $ kotlinc-js -output binom.js -library-files sample-library.jar binom.kt
</code></pre>

        </article>
    </div>



    <script src="/kotlin-web-site-ja/_assets/tutorials.js"></script>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000&ndash;2016 JetBrains. All rights reserved
            </div>

            <div class="terms-sponsor">
                Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a>
            </div>
        </div>
    </div>

</footer></body>
</html>