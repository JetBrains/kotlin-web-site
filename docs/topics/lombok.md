[//]: # (title: Lombok compiler plugin)

> The Lombok compiler plugin is [Experimental](components-stability.md). 
> It may be dropped or changed at any time. Use it only for evaluation purposes. 
> We would appreciate your feedback on it in [YouTrack](https://youtrack.jetbrains.com/issue/KT-7112).
>
{type="warning"}

The Lombok compiler plugin allows the generation and use of Java's Lombok declarations within the same mixed Java/Kotlin module. 
If such declarations are generated in another module than the Kotlin code that uses these declarations, 
then you don't need to use this plugin.

[Lombok](https://projectlombok.org/) generates Java code itself, not the Lombok Kotlin compiler plugin. 
Thus, you still need to configure Lombok as usual, when using this plugin. 
Learn more about [how to make the plugin seeing Lombok's config](#defining-the-place-of-lombok-config).

## Support of annotations

See which annotations the plugin supports and the
[current state of Lombok Kotlin compiler plugin](https://github.com/JetBrains/kotlin/blob/master/plugins/lombok/lombok-compiler-plugin/README.md).

Currently, we don't have plans on supporting the @Builder annotation. However, we can consider this if you vote
for [`@Builder` in YouTrack](https://youtrack.jetbrains.com/issue/KT-46959).

> Kotlin compiler ignores Lombok annotations if you use them in Kotlin code.
>
{type="note"}

## Gradle

### Main settings

Apply the `kotlin-plugin-lombok` Gradle plugin in the `build.gradle.kts` file:

```kotlin
plugins {
    id ("org.jetbrains.kotlin.plugin.lombok") version "%kotlinVersion%"
}
```

Set up the Lombok itself as the plugin:

```kotlin
plugins {
    id ("io.freefair.lombok") version "5.3.0"
}
```
See the [test project with examples of Lombok compiler plugin usage](https://github.com/kotlin-hands-on/kotlin-lombok-examples/tree/master/kotlin_lombok_gradle/nokapt).

### Defining the place of lombok.config

If you use the file `lombok.config` for [configuring Lombok](https://projectlombok.org/features/configuration),
provide a path to it to the plugin. Add the following code to your `build.gradle.kts` file:

```kotlin
kotlinLombok {
    lombokConfigurationFile(file("lombok.config"))
}
```

See the [test project with examples of Lombok compiler plugin and `lombok.config` usages](https://github.com/kotlin-hands-on/kotlin-lombok-examples/tree/master/kotlin_lombok_gradle/withconfig).

## Maven

To use Lombok compiler plugin, add the following lines to the `pom.xml` file:

```xml
<plugin>
    <groupId>org.jetbrains.kotlin</groupId>
    <artifactId>kotlin-maven-plugin</artifactId>
    <version>${kotlin.version}</version>
    <configuration>
        <compilerPlugins>
            <plugin>lombok</plugin>
        </compilerPlugins>
        <pluginOptions>
            <option>lombok:config=${project.basedir}/lombok.config</option>
        </pluginOptions>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>org.jetbrains.kotlin</groupId>
            <artifactId>kotlin-maven-lombok</artifactId>
            <version>${kotlin.version}</version>
        </dependency>
    </dependencies>
</plugin>
```

Please refer to the [Gradle](#gradle) section for detailed information about the Lombok Kotlin compiler plugin configuration.

See the [test project example of Lombok compiler plugin and `lombok.config` usages](https://github.com/kotlin-hands-on/kotlin-lombok-examples/tree/master/kotlin_lombok_maven/nokapt).

## Using the plugin along with kapt

By default, [kapt](kapt.md) compiler plugin launches all annotation processors and disables javac's annotation processors.
You need to change this behavior: enable Java's Lombok.

If you use Gradle, add the option to the `build.gradle.kts` file to make javac's annotations
processors working:

```kotlin
kapt {
    keepJavacAnnotationProcessors = true
}
```

If Maven, use the following settings to launch Lombok with Java's compiler:

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.5.1</version>
    <configuration>
        <source>1.8</source>
        <target>1.8</target>
        <annotationProcessorPaths>
            <annotationProcessorPath>
                <groupId>org.projectlombok</groupId>
                <artifactId>lombok</artifactId>
                <version>${lombok.version}</version>
            </annotationProcessorPath>
        </annotationProcessorPaths>
    </configuration>
</plugin>    
```

> The Lombok compiler plugin works successfully along with [kapt](kapt.md) if annotations processors don't depend
> on the code generated by Lombok.
>
{type="note"}

Look through the test project examples of kapt and Lombok compiler plugins usages:
* Using [Gradle](https://github.com/JetBrains/kotlin/tree/master/libraries/tools/kotlin-gradle-plugin-integration-tests/src/test/resources/testProject/lombokProject/yeskapt).
* Using [Maven](https://github.com/kotlin-hands-on/kotlin-lombok-examples/tree/master/kotlin_lombok_maven/yeskapt)

