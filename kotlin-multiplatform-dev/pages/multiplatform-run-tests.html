<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-25T13:01:23.78401204"><meta name="build-number" content="637"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Test your multiplatform app &minus; tutorial | Kotlin Multiplatform Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"test-a-simple-multiplatform-project","level":0,"title":"Test a simple multiplatform project","anchor":"#test-a-simple-multiplatform-project"},{"id":"work-with-more-complex-projects","level":0,"title":"Work with more complex projects","anchor":"#work-with-more-complex-projects"},{"id":"rules-for-using-tests-in-multiplatform-projects","level":0,"title":"Rules for using tests in multiplatform projects","anchor":"#rules-for-using-tests-in-multiplatform-projects"},{"id":"what-s-next","level":0,"title":"What\u0027s next?","anchor":"#what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><link rel="icon" type="image/x-icon" sizes="16x16" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"><link rel="icon" type="image/png" sizes="96x96" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"><link rel="icon" type="image/png" sizes="300x300" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"><link rel="icon" type="image/png" sizes="500x500" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Test your multiplatform app &minus; tutorial | Kotlin Multiplatform"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><meta property="og:site_name" content="Kotlin Multiplatform Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-run-tests.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Test your multiplatform app &minus; tutorial | Kotlin Multiplatform"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-run-tests.html#webpage",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-run-tests.html",
    "name": "Test your multiplatform app &minus; tutorial | Kotlin Multiplatform",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/#website",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/",
    "name": "Kotlin Multiplatform Help"
}</script><!-- End Schema.org --><meta name="msapplication-TileColor" content="#000000"/>
<meta name="msapplication-TileImage"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/>
<meta name="msapplication-square70x70logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/>
<meta name="msapplication-square150x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/>
<meta name="msapplication-wide310x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/>
<meta name="msapplication-square310x310logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>
<script>document.cookie="wh_theme=light;expires="+(new Date(Date.now()+500000000).toUTCString())+"; path=/;";</script>
<style>
<!--slack icon-->
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]{position:relative;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"] svg{visibility:hidden;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]::before{
display:block;content:"";position:absolute;top:0;bottom:0;left:0;right:0;
background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M9.586 6.601h1.9v-1.9a1.837 1.837 0 00-1.9-1.9 1.9 1.9 0 000 3.8zm1.9 7.6v4.7a1.837 1.837 0 01-1.9 1.9 1.9 1.9 0 01-1.9-1.9v-4.7a1.899 1.899 0 011.9-1.9 1.837 1.837 0 011.9 1.9zm-5.864 1.773a1.839 1.839 0 01-.737.127 1.9 1.9 0 010-3.8h1.9v1.9a1.839 1.839 0 01-1.163 1.773zm3.963-4.673h-4.7a1.9 1.9 0 010-3.8h4.7a1.838 1.838 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9zm11.4-1.9a1.967 1.967 0 00-1.9-1.9 1.899 1.899 0 00-1.9 1.9v1.9h1.9a1.9 1.9 0 001.9-1.9zm-5.862 1.773a1.839 1.839 0 01-.738.127 1.9 1.9 0 01-1.9-1.9v-4.7a1.839 1.839 0 011.9-1.9 1.898 1.898 0 011.9 1.9v4.7a1.837 1.837 0 01-1.162 1.773zm-.738 9.628a1.839 1.839 0 001.9-1.9 1.9 1.9 0 00-1.9-1.9h-1.9v1.9a1.899 1.899 0 001.9 1.9zm4.7-4.7h-4.7a1.9 1.9 0 110-3.8h4.7a1.836 1.836 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9z"/></svg>') no-repeat center;background-size:20px 20px;}
[data-test="footer-socials"]+.jb-footer__legal{flex-basis:100%;margin-top:8px;}

<!--Drop any switches and set default theme-->
.wh-header__switchers{display:none!important}
</style></head><body data-id="multiplatform-run-tests" data-main-title="Test your multiplatform app − tutorial" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="" data-edit-url="https://github.com/JetBrains/kotlin-multiplatform-dev-docs/edit/master/topics/multiplatform-run-tests.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin Multiplatform  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="multiplatform-run-tests" data-annotation-ids="IntelliJ IDEA,Android Studio" id="multiplatform-run-tests.md">Test your multiplatform app − tutorial</h1><div class="micro-format" data-content="{&quot;microFormat&quot;:[&quot;\u003cp id\u003d\&quot;fm25s1_14\&quot;\u003eThis tutorial uses IntelliJ IDEA, but you can also follow it in Android Studio \u0026ndash; both IDEs share the same core functionality and Kotlin Multiplatform support.\u003c/p\u003e&quot;]}"></div><p id="fm25s1_5">In this tutorial, you'll learn how to create, configure, and run tests in Kotlin Multiplatform applications.</p><p id="fm25s1_6">Tests for multiplatform projects can be divided into two categories:</p><ul class="list _bullet" id="fm25s1_7"><li class="list__item" id="fm25s1_15"><p>Tests for common code. These tests can be run on any platform using any supported framework.</p></li><li class="list__item" id="fm25s1_16"><p>Tests for platform-specific code. These are essential to test platform-specific logic. They use a platform-specific framework and can benefit from its additional features, such as a richer API and a wider range of assertions.</p></li></ul><p id="fm25s1_8">Both categories are supported in multiplatform projects. This tutorial will first show you how to set up, create, and run unit tests for common code in a simple Kotlin Multiplatform project. Then, you'll work with a more complex example that requires tests both for common and platform-specific code.</p><aside class="prompt" data-type="tip" data-title="" id="fm25s1_9"><p id="fm25s1_17">This tutorial assumes that you are familiar with:</p><ul class="list _bullet" id="fm25s1_18"><li class="list__item" id="fm25s1_19"><p>The layout of a Kotlin Multiplatform project. If this is not the case, complete <a href="multiplatform-create-first-app.html" id="fm25s1_21">this tutorial</a> before you begin.</p></li><li class="list__item" id="fm25s1_20"><p>The basics of popular unit testing frameworks, such as <a href="https://junit.org/junit5/" id="fm25s1_22" data-external="true" rel="noopener noreferrer">JUnit</a>.</p></li></ul></aside><section class="chapter"><h2 id="test-a-simple-multiplatform-project" data-toc="test-a-simple-multiplatform-project">Test a simple multiplatform project</h2><section class="chapter"><h3 id="create-a-project" data-toc="create-a-project">Create a project</h3><ol class="list _decimal" id="fm25s1_27" type="1"><li class="list__item" id="fm25s1_28"><p id="fm25s1_34">In the <a href="quickstart.html" id="fm25s1_35">quickstart</a>, complete the instructions to <a href="quickstart.html#set-up-the-environment" id="fm25s1_36">set up your environment for Kotlin Multiplatform development</a>.</p></li><li class="list__item" id="fm25s1_29"><p id="fm25s1_37">In IntelliJ IDEA, select <span class="control" id="fm25s1_38">File</span> | <span class="control" id="fm25s1_39">New</span> | <span class="control" id="fm25s1_40">Project</span>.</p></li><li class="list__item" id="fm25s1_30"><p id="fm25s1_41">In the panel on the left, select <span class="control" id="fm25s1_42">Kotlin Multiplatform</span>.</p></li><li class="list__item" id="fm25s1_31"><p id="fm25s1_43">Specify the following fields in the <span class="control" id="fm25s1_45">New Project</span> window:</p><ul class="list _bullet" id="fm25s1_44"><li class="list__item" id="fm25s1_46"><p id="fm25s1_50"><span class="control" id="fm25s1_51">Name</span>: KotlinProject</p></li><li class="list__item" id="fm25s1_47"><p id="fm25s1_52"><span class="control" id="fm25s1_53">Group</span>: kmp.project.demo</p></li><li class="list__item" id="fm25s1_48"><p id="fm25s1_54"><span class="control" id="fm25s1_55">Artifact</span>: kotlinproject</p></li><li class="list__item" id="fm25s1_49"><p id="fm25s1_56"><span class="control" id="fm25s1_58">JDK</span>: Amazon Corretto version 17</p><aside class="prompt" data-type="note" data-title="" id="fm25s1_57"><p id="fm25s1_59">This JDK version is required for one of the tests that you add later to run successfully.</p></aside></li></ul></li><li class="list__item" id="fm25s1_32"><p id="fm25s1_60">Select the <span class="control" id="fm25s1_62">Android</span> target.</p><ul class="list _bullet" id="fm25s1_61"><li class="list__item" id="fm25s1_63"><p>If you're using a Mac, select <span class="control" id="fm25s1_64">iOS</span> as well. Make sure that the <span class="control" id="fm25s1_65">Do not share UI</span> option is selected.</p></li></ul></li><li class="list__item" id="fm25s1_33"><p id="fm25s1_66">Deselect <span class="control" id="fm25s1_68">Include tests</span> and click <span class="control" id="fm25s1_69">Create</span>.</p><figure id="fm25s1_67"><img alt="Create simple multiplatform project" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/create-test-multiplatform-project.png" title="Create simple multiplatform project" width="800" height="749"></figure></li></ol></section><section class="chapter"><h3 id="write-code" data-toc="write-code">Write code</h3><p id="fm25s1_70">In the <code class="code" id="fm25s1_73">shared/src/commonMain/kotlin</code> directory, create a new <code class="code" id="fm25s1_74">common.example.search</code> directory. In this directory, create a Kotlin file, <code class="code" id="fm25s1_75">Grep.kt</code>, with the following function:</p><div class="code-block" data-lang="kotlin">
fun grep(lines: List&lt;String&gt;, pattern: String, action: (String) -&gt; Unit) {
    val regex = pattern.toRegex()
    lines.filter(regex::containsMatchIn)
        .forEach(action)
}
</div><p id="fm25s1_72">This function is designed to resemble the <a href="https://en.wikipedia.org/wiki/Grep" id="fm25s1_76" data-external="true" rel="noopener noreferrer">UNIX <code class="code" id="fm25s1_77">grep</code> command</a>. Here, the function takes lines of text, a pattern used as a regular expression, and a function that is invoked every time a line matches the pattern.</p></section><section class="chapter"><h3 id="add-tests" data-toc="add-tests">Add tests</h3><p id="fm25s1_78">Now, let's test the common code. An essential part will be a source set for common tests, which has the <a href="https://kotlinlang.org/api/latest/kotlin.test/" id="fm25s1_82" data-external="true" rel="noopener noreferrer"><code class="code" id="fm25s1_83">kotlin.test</code></a> API library as a dependency.</p><ol class="list _decimal" id="fm25s1_79" type="1"><li class="list__item" id="fm25s1_84"><p id="fm25s1_88">In the <code class="code" id="fm25s1_90">shared/build.gradle.kts</code> file, check that there is a dependency on the <code class="code" id="fm25s1_91">kotlin.test</code> library:</p><div class="code-block" data-lang="kotlin">
sourceSets {
   //...
   commonTest.dependencies {
       implementation(libs.kotlin.test)
   }
}
</div></li><li class="list__item" id="fm25s1_85"><p id="fm25s1_92">The <code class="code" id="fm25s1_95">commonTest</code> source set stores all common tests. You need to create a directory with the same name in your project:</p><ol class="list _decimal" id="fm25s1_93" type="1"><li class="list__item" id="fm25s1_96"><p>Right-click the <code class="code" id="fm25s1_98">shared/src</code> directory and select <span class="control" id="fm25s1_99">New | Directory</span>. The IDE presents a list of options.</p></li><li class="list__item" id="fm25s1_97"><p>Start typing the <code class="code" id="fm25s1_100">commonTest/kotlin</code> path to narrow down the selection, then choose it from the list:</p></li></ol><figure id="fm25s1_94"><img alt="Creating common test directory" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/create-common-test-dir.png" title="Creating common test directory" width="350" height="108"></figure></li><li class="list__item" id="fm25s1_86"><p id="fm25s1_101">In the <code class="code" id="fm25s1_102">commonTest/kotlin</code> directory, create a new <code class="code" id="fm25s1_103">common.example.search</code> package.</p></li><li class="list__item" id="fm25s1_87"><p id="fm25s1_104">In this package, create the <code class="code" id="fm25s1_106">Grep.kt</code> file and update it with the following unit test:</p><div class="code-block" data-lang="kotlin">
import kotlin.test.Test
import kotlin.test.assertContains
import kotlin.test.assertEquals

class GrepTest {
    companion object {
        val sampleData = listOf(
            &quot;123 abc&quot;,
            &quot;abc 123&quot;,
            &quot;123 ABC&quot;,
            &quot;ABC 123&quot;
        )
    }

    @Test
    fun shouldFindMatches() {
        val results = mutableListOf&lt;String&gt;()
        grep(sampleData, &quot;[a-z]+&quot;) {
            results.add(it)
        }

        assertEquals(2, results.size)
        for (result in results) {
            assertContains(result, &quot;abc&quot;)
        }
    }
}
</div></li></ol><p id="fm25s1_80">As you can see, imported annotations and assertions are neither platform- nor framework-specific. When you run this test later, a platform-specific framework will provide the test runner.</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="explore-the-kotlin-test-api" data-toc="explore-the-kotlin-test-api">Explore the <code class="code" id="fm25s1_111">kotlin.test</code> API</h4></div><div class="collapse__content"><p id="fm25s1_108">The <a href="https://kotlinlang.org/api/latest/kotlin.test/" id="fm25s1_112" data-external="true" rel="noopener noreferrer"><code class="code" id="fm25s1_114">kotlin.test</code></a> library provides platform-agnostic annotations and assertions for you to use in your tests. Annotations, such as <code class="code" id="fm25s1_113">Test</code>, map to those provided by the selected framework or their nearest equivalent.</p><p id="fm25s1_109">Assertions are executed through an implementation of the <a href="https://kotlinlang.org/api/latest/kotlin.test/kotlin.test/-asserter/" id="fm25s1_115" data-external="true" rel="noopener noreferrer"><code class="code" id="fm25s1_116">Asserter</code> interface</a>. This interface defines the different checks commonly performed in testing. The API has a default implementation, but typically you will use a framework-specific implementation.</p><p id="fm25s1_110">For example, the JUnit 4, JUnit 5, and TestNG frameworks are all supported on JVM. On Android, a call to <code class="code" id="fm25s1_117">assertEquals()</code> might result in a call to <code class="code" id="fm25s1_118">asserter.assertEquals()</code>, where the <code class="code" id="fm25s1_119">asserter</code> object is an instance of <code class="code" id="fm25s1_120">JUnit4Asserter</code>. On iOS, the default implementation of the <code class="code" id="fm25s1_121">Asserter</code> type is used in conjunction with the Kotlin/Native test runner.</p></div></div></section></section><section class="chapter"><h3 id="run-tests" data-toc="run-tests">Run tests</h3><p id="fm25s1_122">You can execute the test by running:</p><ul class="list _bullet" id="fm25s1_123"><li class="list__item" id="fm25s1_129"><p>The <code class="code" id="fm25s1_132">shouldFindMatches()</code> test function using the <span class="control" id="fm25s1_133">Run</span> icon in the gutter.</p></li><li class="list__item" id="fm25s1_130"><p>The test file using its context menu.</p></li><li class="list__item" id="fm25s1_131"><p>The <code class="code" id="fm25s1_134">GrepTest</code> test class using the <span class="control" id="fm25s1_135">Run</span> icon in the gutter.</p></li></ul><p id="fm25s1_124">There's also a handy <kbd class="keystroke" id="fm25s1_136" data-bypass="true"><span class="keystroke__value">⌃ ⇧ F10</span></kbd>/<kbd class="keystroke" id="fm25s1_137" data-bypass="true"><span class="keystroke__value">Ctrl+Shift+F10</span></kbd> shortcut. Regardless of the option you choose, you'll see a list of targets to run the test on:</p><figure id="fm25s1_125"><img alt="Run test task" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/run-test-tasks.png" title="Run test task" width="300" height="151"></figure><p id="fm25s1_126">For the <code class="code" id="fm25s1_138">android</code> option, tests are run using JUnit 4. For <code class="code" id="fm25s1_139">iosSimulatorArm64</code>, the Kotlin compiler detects testing annotations and creates a <span class="emphasis" id="fm25s1_140">test binary</span> that is executed by Kotlin/Native's own test runner.</p><p id="fm25s1_127">Here is an example of the output generated by a successful test run:</p><figure id="fm25s1_128"><img alt="Test output" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/run-test-results.png" title="Test output" width="700" height="636"></figure></section></section><section class="chapter"><h2 id="work-with-more-complex-projects" data-toc="work-with-more-complex-projects">Work with more complex projects</h2><section class="chapter"><h3 id="write-tests-for-common-code" data-toc="write-tests-for-common-code">Write tests for common code</h3><p id="fm25s1_144">You've already created a test for common code with the <code class="code" id="fm25s1_148">grep()</code> function. Now, let's consider a more advanced common code test with the <code class="code" id="fm25s1_149">CurrentRuntime</code> class. This class contains details of the platform on which the code is executed. For example, it might have the values &quot;OpenJDK&quot; and &quot;17.0&quot; for Android unit tests that run on a local JVM.</p><p id="fm25s1_145">An instance of <code class="code" id="fm25s1_150">CurrentRuntime</code> should be created with the name and version of the platform as strings, where the version is optional. When the version is present, you only need the number at the start of the string, if available.</p><ol class="list _decimal" id="fm25s1_146" type="1"><li class="list__item" id="fm25s1_151"><p id="fm25s1_155">In the <code class="code" id="fm25s1_156">commonMain/kotlin</code> directory, create a new <code class="code" id="fm25s1_157">org.kmp.testing</code> directory.</p></li><li class="list__item" id="fm25s1_152"><p id="fm25s1_158">In this directory, create the <code class="code" id="fm25s1_160">CurrentRuntime.kt</code> file and update it with the following implementation:</p><div class="code-block" data-lang="kotlin">
class CurrentRuntime(val name: String, rawVersion: String?) {
    companion object {
        val versionRegex = Regex(&quot;^[0-9]+(\\.[0-9]+)?&quot;)
    }

    val version = parseVersion(rawVersion)

    override fun toString() = &quot;$name version $version&quot;

    private fun parseVersion(rawVersion: String?): String {
        val result = rawVersion?.let { versionRegex.find(it) }
        return result?.value ?: &quot;unknown&quot;
    }
}
</div></li><li class="list__item" id="fm25s1_153"><p id="fm25s1_161">In the <code class="code" id="fm25s1_162">commonTest/kotlin</code> directory, create a new <code class="code" id="fm25s1_163">org.kmp.testing</code> package.</p></li><li class="list__item" id="fm25s1_154"><p id="fm25s1_164">In this package, create the <code class="code" id="fm25s1_166">CurrentRuntimeTest.kt</code> file and update it with the following platform and framework-agnostic test:</p><div class="code-block" data-lang="kotlin">
import kotlin.test.Test
import kotlin.test.assertEquals

class CurrentRuntimeTest {
    @Test
    fun shouldDisplayDetails() {
        val runtime = CurrentRuntime(&quot;MyRuntime&quot;, &quot;1.1&quot;)
        assertEquals(&quot;MyRuntime version 1.1&quot;, runtime.toString())
    }

    @Test
    fun shouldHandleNullVersion() {
        val runtime = CurrentRuntime(&quot;MyRuntime&quot;, null)
        assertEquals(&quot;MyRuntime version unknown&quot;, runtime.toString())
    }

    @Test
    fun shouldParseNumberFromVersionString() {
        val runtime = CurrentRuntime(&quot;MyRuntime&quot;, &quot;1.2 Alpha Experimental&quot;)
        assertEquals(&quot;MyRuntime version 1.2&quot;, runtime.toString())
    }

    @Test
    fun shouldHandleMissingVersion() {
        val runtime = CurrentRuntime(&quot;MyRuntime&quot;, &quot;Alpha Experimental&quot;)
        assertEquals(&quot;MyRuntime version unknown&quot;, runtime.toString())
    }
}
</div></li></ol><p id="fm25s1_147">You can run this test using any of the ways <a href="#run-tests" id="fm25s1_167">available in the IDE</a>.</p></section><section class="chapter"><h3 id="add-platform-specific-tests" data-toc="add-platform-specific-tests">Add platform-specific tests</h3><aside class="prompt" data-type="note" data-title="" id="fm25s1_168"><p id="fm25s1_175">Here, the <a href="multiplatform-connect-to-apis.html" id="fm25s1_176">mechanism of expected and actual declarations</a> is used for brevity and simplicity. In more complex code, a better approach is to use interfaces and factory functions.</p></aside><p id="fm25s1_169">Now you have experience writing tests for common code, let's explore writing platform-specific tests for Android and iOS.</p><p id="fm25s1_170">To create an instance of <code class="code" id="fm25s1_177">CurrentRuntime</code>, declare a function in the common <code class="code" id="fm25s1_178">CurrentRuntime.kt</code> file as follows:</p><div class="code-block" data-lang="kotlin">
expect fun determineCurrentRuntime(): CurrentRuntime
</div><p id="fm25s1_172">The function should have separate implementations for each supported platform. Otherwise, the build will fail. As well as implementing this function on each platform, you should provide tests. Let's create them for Android and iOS.</p><section class="chapter"><h4 id="for-android" data-toc="for-android">For Android</h4><ol class="list _decimal" id="fm25s1_179" type="1"><li class="list__item" id="fm25s1_182"><p id="fm25s1_187">In the <code class="code" id="fm25s1_188">androidMain/kotlin</code> directory, create a new <code class="code" id="fm25s1_189">org.kmp.testing</code> package.</p></li><li class="list__item" id="fm25s1_183"><p id="fm25s1_190">In this package, create the <code class="code" id="fm25s1_192">AndroidRuntime.kt</code> file and update it with the actual implementation of the expected <code class="code" id="fm25s1_193">determineCurrentRuntime()</code> function:</p><div class="code-block" data-lang="kotlin">
actual fun determineCurrentRuntime(): CurrentRuntime {
    val name = System.getProperty(&quot;java.vm.name&quot;) ?: &quot;Android&quot;

    val version = System.getProperty(&quot;java.version&quot;)

    return CurrentRuntime(name, version)
}
</div></li><li class="list__item" id="fm25s1_184"><p id="fm25s1_194">Create a directory for tests inside the <code class="code" id="fm25s1_197">shared/src</code> directory:</p><ol class="list _decimal" id="fm25s1_195" type="1"><li class="list__item" id="fm25s1_198"><p>Right-click the <code class="code" id="fm25s1_200">shared/src</code> directory and select <span class="control" id="fm25s1_201">New | Directory</span>. The IDE presents a list of options.</p></li><li class="list__item" id="fm25s1_199"><p>Start typing the <code class="code" id="fm25s1_202">androidUnitTest/kotlin</code> path to narrow down the selection, then choose it from the list:</p></li></ol><figure id="fm25s1_196"><img alt="Creating Android test directory" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/create-android-test-dir.png" title="Creating Android test directory" width="350" height="186"></figure></li><li class="list__item" id="fm25s1_185"><p id="fm25s1_203">In the <code class="code" id="fm25s1_204">kotlin</code> directory, create a new <code class="code" id="fm25s1_205">org.kmp.testing</code> package.</p></li><li class="list__item" id="fm25s1_186"><p id="fm25s1_206">In this package, create the <code class="code" id="fm25s1_209">AndroidRuntimeTest.kt</code> file and update it with the following Android test:</p><div class="code-block" data-lang="kotlin">
import kotlin.test.Test
import kotlin.test.assertContains
import kotlin.test.assertEquals

class AndroidRuntimeTest {
    @Test
    fun shouldDetectAndroid() {
        val runtime = determineCurrentRuntime()
        assertContains(runtime.name, &quot;OpenJDK&quot;)
        assertEquals(runtime.version, &quot;17.0&quot;)
    }
}
</div><aside class="prompt" data-type="note" data-title="" id="fm25s1_208"><p id="fm25s1_210">If you chose a different JDK version at the beginning of the tutorial, you may need to change the <code class="code" id="fm25s1_211">name</code> and <code class="code" id="fm25s1_212">version</code> for the test to run successfully.</p></aside></li></ol><p id="fm25s1_180">It may seem strange that an Android-specific test is run on a local JVM. This is because these tests run as local unit tests on the current machine. As described in the <a href="https://developer.android.com/studio/test/test-in-android-studio" id="fm25s1_213" data-external="true" rel="noopener noreferrer">Android Studio documentation</a>, these tests differ from instrumented tests, which run on a device or an emulator.</p><p id="fm25s1_181">You can add other types of tests to your project. To learn about instrumented tests, see this <a href="https://touchlab.co/understanding-and-configuring-your-kmm-test-suite/" id="fm25s1_214" data-external="true" rel="noopener noreferrer">Touchlab guide</a>.</p></section><section class="chapter"><h4 id="for-ios" data-toc="for-ios">For iOS</h4><ol class="list _decimal" id="fm25s1_215" type="1"><li class="list__item" id="fm25s1_216"><p id="fm25s1_221">In the <code class="code" id="fm25s1_222">iosMain/kotlin</code> directory, create a new <code class="code" id="fm25s1_223">org.kmp.testing</code> directory.</p></li><li class="list__item" id="fm25s1_217"><p id="fm25s1_224">In this directory, create the <code class="code" id="fm25s1_226">IOSRuntime.kt</code> file and update it with the actual implementation of the expected <code class="code" id="fm25s1_227">determineCurrentRuntime()</code> function:</p><div class="code-block" data-lang="kotlin">
import kotlin.experimental.ExperimentalNativeApi
import kotlin.native.Platform

@OptIn(ExperimentalNativeApi::class)
actual fun determineCurrentRuntime(): CurrentRuntime {
    val name = Platform.osFamily.name.lowercase()
    return CurrentRuntime(name, null)
}
</div></li><li class="list__item" id="fm25s1_218"><p id="fm25s1_228">Create a new directory in the <code class="code" id="fm25s1_231">shared/src</code> directory:</p><ol class="list _decimal" id="fm25s1_229" type="1"><li class="list__item" id="fm25s1_232"><p>Right-click the <code class="code" id="fm25s1_234">shared/src</code> directory and select <span class="control" id="fm25s1_235">New | Directory</span>. The IDE presents a list of options.</p></li><li class="list__item" id="fm25s1_233"><p>Start typing the <code class="code" id="fm25s1_236">iosTest/kotlin</code> path to narrow down the selection, then choose it from the list:</p></li></ol><figure id="fm25s1_230"><img alt="Creating iOS test directory" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/create-ios-test-dir.png" title="Creating iOS test directory" width="350" height="192"></figure></li><li class="list__item" id="fm25s1_219"><p id="fm25s1_237">In the <code class="code" id="fm25s1_238">iosTest/kotlin</code> directory, create a new <code class="code" id="fm25s1_239">org.kmp.testing</code> directory.</p></li><li class="list__item" id="fm25s1_220"><p id="fm25s1_240">In this directory, create the <code class="code" id="fm25s1_242">IOSRuntimeTest.kt</code> file and update it with the following iOS test:</p><div class="code-block" data-lang="kotlin">
import kotlin.test.Test
import kotlin.test.assertEquals

class IOSRuntimeTest {
    @Test
    fun shouldDetectOS() {
        val runtime = determineCurrentRuntime()
        assertEquals(runtime.name, &quot;ios&quot;)
        assertEquals(runtime.version, &quot;unknown&quot;)
    }
}
</div></li></ol></section></section><section class="chapter"><h3 id="run-multiple-tests-and-analyze-reports" data-toc="run-multiple-tests-and-analyze-reports">Run multiple tests and analyze reports</h3><p id="fm25s1_243">At this stage, you have the code for common, Android, and iOS implementations, as well as their tests. The directory structure in your project should look something like this:</p><figure id="fm25s1_244"><img alt="Whole project structure" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/code-and-test-structure.png" title="Whole project structure" width="300" height="766"></figure><p id="fm25s1_245">You can run individual tests from the context menu or use the shortcut. One more option is to use Gradle tasks. For example, if you run the <code class="code" id="fm25s1_252">allTests</code> Gradle task, every test in your project will be run with the corresponding test runner:</p><figure id="fm25s1_246"><img alt="Gradle test tasks" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/gradle-alltests.png" title="Gradle test tasks" width="700" height="360"></figure><p id="fm25s1_247">When you run tests, in addition to the output in your IDE, HTML reports are generated. You can find them in the <code class="code" id="fm25s1_253">shared/build/reports/tests</code> directory:</p><figure id="fm25s1_248"><img alt="HTML reports for multiplatform tests" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/shared-tests-folder-reports.png" title="HTML reports for multiplatform tests" width="300" height="387"></figure><p id="fm25s1_249">Run the <code class="code" id="fm25s1_254">allTests</code> task and examine the reports it generated:</p><ul class="list _bullet" id="fm25s1_250"><li class="list__item" id="fm25s1_255"><p>The <code class="code" id="fm25s1_257">allTests/index.html</code> file contains combined reports for common and iOS tests (iOS tests depend on common tests and are run after them).</p></li><li class="list__item" id="fm25s1_256"><p>The <code class="code" id="fm25s1_258">testDebugUnitTest</code> and <code class="code" id="fm25s1_259">testReleaseUnitTest</code> folders contain reports for both default Android build flavors. (Currently, Android test reports are not automatically merged with the <code class="code" id="fm25s1_260">allTests</code> report.)</p></li></ul><figure id="fm25s1_251"><img alt="HTML report for multiplatform tests" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/multiplatform-test-report.png" title="HTML report for multiplatform tests" width="700" height="395"></figure></section></section><section class="chapter"><h2 id="rules-for-using-tests-in-multiplatform-projects" data-toc="rules-for-using-tests-in-multiplatform-projects">Rules for using tests in multiplatform projects</h2><p id="fm25s1_261">You've now created, configured, and executed tests in Kotlin Multiplatform applications. When working with tests in your future projects, remember:</p><ul class="list _bullet" id="fm25s1_262"><li class="list__item" id="fm25s1_263"><p>When writing tests for common code, use only multiplatform libraries, like <a href="https://kotlinlang.org/api/latest/kotlin.test/" id="fm25s1_271" data-external="true" rel="noopener noreferrer">kotlin.test</a>. Add dependencies to the <code class="code" id="fm25s1_272">commonTest</code> source set.</p></li><li class="list__item" id="fm25s1_264"><p>The <code class="code" id="fm25s1_273">Asserter</code> type from the <code class="code" id="fm25s1_274">kotlin.test</code> API should only be used indirectly. Although the <code class="code" id="fm25s1_275">Asserter</code> instance is visible, you don't need to use it in your tests.</p></li><li class="list__item" id="fm25s1_265"><p>Always stay within the testing library API. Fortunately, the compiler and the IDE prevent you from using framework-specific functionality.</p></li><li class="list__item" id="fm25s1_266"><p>Although it doesn't matter which framework you use for running tests in <code class="code" id="fm25s1_276">commonTest</code>, it's a good idea to run your tests with each framework you intend to use to check that your development environment is set up correctly.</p></li><li class="list__item" id="fm25s1_267"><p>Consider the physics difference. For example, scrolling inertia and friction values vary by platform and device, so setting the same scrolling speed may result in different scroll positions. Always test your components on the target platform to ensure the expected behavior.</p></li><li class="list__item" id="fm25s1_268"><p>When writing tests for platform-specific code, you can use the functionality of the corresponding framework, for example, annotations and extensions.</p></li><li class="list__item" id="fm25s1_269"><p>You can run tests both from the IDE and using Gradle tasks.</p></li><li class="list__item" id="fm25s1_270"><p>When you run tests, HTML test reports are generated automatically.</p></li></ul></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next?</h2><ul class="list _bullet" id="fm25s1_277"><li class="list__item" id="fm25s1_278"><p>Explore the layout of multiplatform projects in <a href="multiplatform-discover-project.html" id="fm25s1_280">Understand Multiplatform project structure</a>.</p></li><li class="list__item" id="fm25s1_279"><p>Check out <a href="https://kotest.io/" id="fm25s1_281" data-external="true" rel="noopener noreferrer">Kotest</a>, another multiplatform testing framework provided by the Kotlin ecosystem. Kotest allows writing tests in a range of styles and supports complementary approaches to regular testing. These include <a href="https://kotest.io/docs/framework/datatesting/data-driven-testing.html" id="fm25s1_282" data-external="true" rel="noopener noreferrer">data-driven</a> and <a href="https://kotest.io/docs/proptest/property-based-testing.html" id="fm25s1_283" data-external="true" rel="noopener noreferrer">property-based</a> testing.</p></li></ul></section><div class="last-modified">Last modified: 19 May 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="multiplatform-build-native-binaries.html" class="navigation-links__prev">Build final native binaries</a><a href="multiplatform-publish-apps.html" class="navigation-links__next">Publish your application</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.js"></script></body></html>