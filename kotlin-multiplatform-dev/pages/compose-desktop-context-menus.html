<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-25T13:01:22.197034127"><meta name="build-number" content="637"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Context menus | Kotlin Multiplatform Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"context-menu-in-a-custom-area","level":0,"title":"Context menu in a custom area","anchor":"#context-menu-in-a-custom-area"},{"id":"set-up-theming","level":0,"title":"Set up theming","anchor":"#set-up-theming"},{"id":"localize-menu-items","level":0,"title":"Localize menu items","anchor":"#localize-menu-items"},{"id":"text-context-menu","level":0,"title":"Text context menu","anchor":"#text-context-menu"},{"id":"what-s-next","level":0,"title":"What\u0027s next","anchor":"#what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><link rel="icon" type="image/x-icon" sizes="16x16" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"><link rel="icon" type="image/png" sizes="96x96" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"><link rel="icon" type="image/png" sizes="300x300" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"><link rel="icon" type="image/png" sizes="500x500" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Context menus | Kotlin Multiplatform"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><meta property="og:site_name" content="Kotlin Multiplatform Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-desktop-context-menus.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Context menus | Kotlin Multiplatform"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-desktop-context-menus.html#webpage",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-desktop-context-menus.html",
    "name": "Context menus | Kotlin Multiplatform",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/#website",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/",
    "name": "Kotlin Multiplatform Help"
}</script><!-- End Schema.org --><meta name="msapplication-TileColor" content="#000000"/>
<meta name="msapplication-TileImage"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/>
<meta name="msapplication-square70x70logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/>
<meta name="msapplication-square150x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/>
<meta name="msapplication-wide310x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/>
<meta name="msapplication-square310x310logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>
<script>document.cookie="wh_theme=light;expires="+(new Date(Date.now()+500000000).toUTCString())+"; path=/;";</script>
<style>
<!--slack icon-->
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]{position:relative;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"] svg{visibility:hidden;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]::before{
display:block;content:"";position:absolute;top:0;bottom:0;left:0;right:0;
background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M9.586 6.601h1.9v-1.9a1.837 1.837 0 00-1.9-1.9 1.9 1.9 0 000 3.8zm1.9 7.6v4.7a1.837 1.837 0 01-1.9 1.9 1.9 1.9 0 01-1.9-1.9v-4.7a1.899 1.899 0 011.9-1.9 1.837 1.837 0 011.9 1.9zm-5.864 1.773a1.839 1.839 0 01-.737.127 1.9 1.9 0 010-3.8h1.9v1.9a1.839 1.839 0 01-1.163 1.773zm3.963-4.673h-4.7a1.9 1.9 0 010-3.8h4.7a1.838 1.838 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9zm11.4-1.9a1.967 1.967 0 00-1.9-1.9 1.899 1.899 0 00-1.9 1.9v1.9h1.9a1.9 1.9 0 001.9-1.9zm-5.862 1.773a1.839 1.839 0 01-.738.127 1.9 1.9 0 01-1.9-1.9v-4.7a1.839 1.839 0 011.9-1.9 1.898 1.898 0 011.9 1.9v4.7a1.837 1.837 0 01-1.162 1.773zm-.738 9.628a1.839 1.839 0 001.9-1.9 1.9 1.9 0 00-1.9-1.9h-1.9v1.9a1.899 1.899 0 001.9 1.9zm4.7-4.7h-4.7a1.9 1.9 0 110-3.8h4.7a1.836 1.836 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9z"/></svg>') no-repeat center;background-size:20px 20px;}
[data-test="footer-socials"]+.jb-footer__legal{flex-basis:100%;margin-top:8px;}

<!--Drop any switches and set default theme-->
.wh-header__switchers{display:none!important}
</style></head><body data-id="compose-desktop-context-menus" data-main-title="Context menus" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Compose Multiplatform UI framework///Desktop-specific components" data-edit-url="https://github.com/JetBrains/kotlin-multiplatform-dev-docs/edit/master/topics/compose/compose-desktop-context-menus.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin Multiplatform  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compose-desktop-context-menus" id="compose-desktop-context-menus.md">Context menus</h1><p id="-eyl3cb_2">Compose Multiplatform for desktop provides out-of-the-box support for text context menus and allows you to conveniently tailor any context menus by adding more items, setting up themes, and customizing text.</p><section class="chapter"><h2 id="context-menu-in-a-custom-area" data-toc="context-menu-in-a-custom-area">Context menu in a custom area</h2><p id="-eyl3cb_8">You can create a context menu for any arbitrary area of your application. Use <code class="code" id="-eyl3cb_11">ContextMenuArea</code> to define a container where the right mouse click will trigger the appearance of a context menu:</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="ContextMenuArea(items = { listOf( ContextMenuItem( ">
import androidx.compose.foundation.ContextMenuArea
import androidx.compose.foundation.ContextMenuItem
import androidx.compose.foundation.background
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.width
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.unit.dp
import androidx.compose.ui.window.singleWindowApplication

fun main() = singleWindowApplication(title = &quot;Context menu&quot;) {
    ContextMenuArea(items = {
        listOf(
            ContextMenuItem(&quot;User-defined action&quot;) {
                // Custom action
            },
            ContextMenuItem(&quot;Another user-defined action&quot;) {
                // Another custom action
            }
        )
    }) {
        // Blue box where context menu will be available
        Box(modifier = Modifier.background(Color.Blue).height(100.dp).width(100.dp))
    }
}
</div><figure id="-eyl3cb_10"><img alt="Context menu: ContextMenuArea" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-custom-area.png" title="Context menu: ContextMenuArea" width="500" height="185"></figure></section><section class="chapter"><h2 id="set-up-theming" data-toc="set-up-theming">Set up theming</h2><p id="-eyl3cb_12">You can customize context menu colors to create a responsive UI that matches the system settings and avoid harsh contrast changes when switching between applications. For default light and dark themes, there are two built-in implementations: <code class="code" id="-eyl3cb_15">LightDefaultContextMenuRepresentation</code> and <code class="code" id="-eyl3cb_16">DarkDefaultContextMenuRepresentation</code>. They are not applied to context menu colors automatically, so you need to set a suitable theme via <code class="code" id="-eyl3cb_17">LocalContextMenuRepresentation</code>:</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="MaterialTheme( colors = if (isSystemInDarkTheme()) darkColors() else ">
import androidx.compose.foundation.DarkDefaultContextMenuRepresentation
import androidx.compose.foundation.LightDefaultContextMenuRepresentation
import androidx.compose.foundation.LocalContextMenuRepresentation
import androidx.compose.foundation.isSystemInDarkTheme
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.material.MaterialTheme
import androidx.compose.material.Surface
import androidx.compose.material.TextField
import androidx.compose.material.darkColors
import androidx.compose.material.lightColors
import androidx.compose.runtime.CompositionLocalProvider
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Modifier
import androidx.compose.ui.window.singleWindowApplication

fun main() = singleWindowApplication(title = &quot;Dark theme&quot;) {
    MaterialTheme(
        colors = if (isSystemInDarkTheme()) darkColors() else lightColors()
    ) {
        val contextMenuRepresentation = if (isSystemInDarkTheme()) {
            DarkDefaultContextMenuRepresentation
        } else {
            LightDefaultContextMenuRepresentation
        }
        CompositionLocalProvider(LocalContextMenuRepresentation provides contextMenuRepresentation) {
            Surface(Modifier.fillMaxSize()) {
                Box {
                    var value by remember { mutableStateOf(&quot;&quot;) }
                    TextField(value, { value = it })
                }
            }
        }
    }
}
</div><figure id="-eyl3cb_14"><img alt="Context menu: Dark theme" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-dark-mode.png" title="Context menu: Dark theme" width="500" height="207"></figure></section><section class="chapter"><h2 id="localize-menu-items" data-toc="localize-menu-items">Localize menu items</h2><p id="-eyl3cb_18">By default, the context menu will appear in the preferred language of your system settings:</p><figure id="-eyl3cb_19"><img alt="Context menu: Localization" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-localization.png" title="Context menu: Localization" width="500" height="220"></figure><p id="-eyl3cb_20">If you want to use a specific language, specify it as a default language explicitly before running your application:</p><div class="code-block" data-lang="bash">
java.util.Locale.setDefault(java.util.Locale(&quot;en&quot;))
</div></section><section class="chapter"><h2 id="text-context-menu" data-toc="text-context-menu">Text context menu</h2><section class="chapter"><h3 id="default-text-context-menu" data-toc="default-text-context-menu">Default text context menu</h3><p id="-eyl3cb_26">Compose Multiplatform for desktop offers built-in context menus for <code class="code" id="-eyl3cb_34">TextField</code> and selectable <code class="code" id="-eyl3cb_35">Text</code>.</p><p id="-eyl3cb_27">The default context menu for a text field includes the following actions, depending on the cursor's position and the selection range: copy, cut, paste, and select all. This standard context menu is available by default in the material <code class="code" id="-eyl3cb_36">TextField</code> (<code class="code" id="-eyl3cb_37">androidx.compose.material.TextField</code> or <code class="code" id="-eyl3cb_38">androidx.compose.material3.TextField</code>) and the foundation <code class="code" id="-eyl3cb_39">BasicTextField</code> (<code class="code" id="-eyl3cb_40">androidx.compose.foundation.text.BasicTextField</code>).</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="TextField( value = text.value, onValueChange =">
import androidx.compose.material.Text
import androidx.compose.material.TextField
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.ui.window.singleWindowApplication

fun main() = singleWindowApplication(title = &quot;Context menu&quot;) {
    val text = remember { mutableStateOf(&quot;Hello!&quot;) }
    TextField(
        value = text.value,
        onValueChange = { text.value = it },
        label = { Text(text = &quot;Input&quot;) }
    )
}
</div><figure id="-eyl3cb_29"><img alt="Default context menu for TextField" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-textfield.png" title="Default context menu for TextField" width="500" height="237"></figure><p id="-eyl3cb_30">See the <a href="https://kotlinlang.org/api/compose-multiplatform/material3/androidx.compose.material3/-text-field.html" id="-eyl3cb_41" data-external="true" rel="noopener noreferrer">API reference</a> for details.</p><p id="-eyl3cb_31">The default context menu for a simple text element includes only the copy action. To enable a context menu for a <code class="code" id="-eyl3cb_42">Text</code> component, make the text selectable by wrapping it in a <code class="code" id="-eyl3cb_43">SelectionContainer</code>:</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="SelectionContainer { Text( ">
import androidx.compose.foundation.text.selection.SelectionContainer
import androidx.compose.material.Text
import androidx.compose.ui.window.singleWindowApplication

fun main() = singleWindowApplication(title = &quot;Context menu&quot;) {
    SelectionContainer {
        Text(&quot;Hello World!&quot;)
    }
}
</div><figure id="-eyl3cb_33"><img alt="Default context menu for Text" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-text.png" title="Default context menu for Text" width="500" height="175"></figure></section><section class="chapter"><h3 id="add-custom-items" data-toc="add-custom-items">Add custom items</h3><p id="-eyl3cb_44">To add custom context menu actions for the <code class="code" id="-eyl3cb_47">TextField</code> and <code class="code" id="-eyl3cb_48">Text</code> components, specify new items via <code class="code" id="-eyl3cb_49">ContextMenuItem</code> and add them to the hierarchy of context menu items via <code class="code" id="-eyl3cb_50">ContextMenuDataProvider</code>. For example, the following code sample shows how to add two new custom actions to the default context menus of a text field and a simple selectable text element:</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="ContextMenuDataProvider( items = { listOf( ContextMenuItem( ">
import androidx.compose.foundation.ContextMenuDataProvider
import androidx.compose.foundation.ContextMenuItem
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.text.selection.SelectionContainer
import androidx.compose.material.Text
import androidx.compose.material.TextField
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import androidx.compose.ui.window.singleWindowApplication

fun main() = singleWindowApplication(title = &quot;Context menu&quot;) {
    val text = remember { mutableStateOf(&quot;Hello!&quot;) }
    Column {
        ContextMenuDataProvider(
            items = {
                listOf(
                    ContextMenuItem(&quot;User-defined action&quot;) {
                        // Custom action
                    },
                    ContextMenuItem(&quot;Another user-defined action&quot;) {
                        // Another custom action
                    }
                )
            }
        ) {
            TextField(
                value = text.value,
                onValueChange = { text.value = it },
                label = { Text(text = &quot;Input&quot;) }
            )

            Spacer(Modifier.height(16.dp))

            SelectionContainer {
                Text(&quot;Hello World!&quot;)
            }
        }
    }
}
</div><figure id="-eyl3cb_46"><img alt="Context menu with custom actions" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-custom-actions.png" title="Context menu with custom actions" width="500" height="288"></figure></section><section class="chapter"><h3 id="override-default-text-context-menu" data-toc="override-default-text-context-menu">Override default text context menu</h3><p id="-eyl3cb_51">To override the default context menu for text fields and selectable text elements, override the <code class="code" id="-eyl3cb_54">TextContextMenu</code> interface. In the following code sample, we reuse the original <code class="code" id="-eyl3cb_55">TextContextMenu</code>, but add one additional item to the bottom of the list. The new item adjusts to the text selection:</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="CompositionLocalProvider( LocalTextContextMenu provides object : TextContextMenu { ">
import androidx.compose.foundation.ContextMenuDataProvider
import androidx.compose.foundation.ContextMenuItem
import androidx.compose.foundation.ContextMenuState
import androidx.compose.foundation.ExperimentalFoundationApi
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.text.LocalTextContextMenu
import androidx.compose.foundation.text.TextContextMenu
import androidx.compose.foundation.text.selection.SelectionContainer
import androidx.compose.material.Text
import androidx.compose.material.TextField
import androidx.compose.runtime.Composable
import androidx.compose.runtime.CompositionLocalProvider
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.platform.LocalUriHandler
import androidx.compose.ui.text.AnnotatedString
import androidx.compose.ui.window.singleWindowApplication
import java.net.URLEncoder
import java.nio.charset.Charset

fun main() = singleWindowApplication(title = &quot;Context menu&quot;) {
    CustomTextMenuProvider {
        Column {
            SelectionContainer {
                Text(&quot;Hello, Compose!&quot;)
            }
            var text by remember { mutableStateOf(&quot;&quot;) }
            TextField(text, { text = it })
        }
    }
}

@OptIn(ExperimentalFoundationApi::class)
@Composable
fun CustomTextMenuProvider(content: @Composable () -&gt; Unit) {
    val textMenu = LocalTextContextMenu.current
    val uriHandler = LocalUriHandler.current
    CompositionLocalProvider(
        LocalTextContextMenu provides object : TextContextMenu {
            @Composable
            override fun Area(
                textManager: TextContextMenu.TextManager,
                state: ContextMenuState,
                content: @Composable () -&gt; Unit
            ) {
                // Reuses original TextContextMenu and adds a new item
                ContextMenuDataProvider({
                    val shortText = textManager.selectedText.crop()
                    if (shortText.isNotEmpty()) {
                        val encoded = URLEncoder.encode(shortText, Charset.defaultCharset())
                        listOf(ContextMenuItem(&quot;Search $shortText&quot;) {
                            uriHandler.openUri(&quot;https://google.com/search?q=$encoded&quot;)
                        })
                    } else {
                        emptyList()
                    }
                }) {
                    textMenu.Area(textManager, state, content = content)
                }
            }
        },
        content = content
    )
}

private fun AnnotatedString.crop() = if (length &lt;= 5) toString() else &quot;${take(5)}...&quot;
</div><figure id="-eyl3cb_53"><img alt="Context menu: LocalTextContextMenu" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-custom-text.png" title="Context menu: LocalTextContextMenu" width="500" height="264"></figure></section><section class="chapter"><h3 id="swing-interoperability" data-toc="swing-interoperability">Swing interoperability</h3><p id="-eyl3cb_56">If you are embedding Compose code into an existing Swing application and need the context menu to match the appearance and behavior of other parts of the application, you can use the <code class="code" id="-eyl3cb_59">JPopupTextMenu</code> class. In this class, <code class="code" id="-eyl3cb_60">LocalTextContextMenu</code> uses Swing's <code class="code" id="-eyl3cb_61">JPopupMenu</code> for context menus in Compose components.</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="fun JPopupTextMenuProvider(owner: Component, content: @Composable () -&gt; Unit) ">
import androidx.compose.foundation.ExperimentalFoundationApi
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.text.JPopupTextMenu
import androidx.compose.foundation.text.LocalTextContextMenu
import androidx.compose.foundation.text.selection.SelectionContainer
import androidx.compose.material.Text
import androidx.compose.material.TextField
import androidx.compose.runtime.Composable
import androidx.compose.runtime.CompositionLocalProvider
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.awt.ComposePanel
import androidx.compose.ui.platform.LocalLocalization
import java.awt.Color
import java.awt.Component
import java.awt.Dimension
import java.awt.Graphics
import java.awt.event.KeyEvent
import java.awt.event.KeyEvent.CTRL_DOWN_MASK
import java.awt.event.KeyEvent.META_DOWN_MASK
import javax.swing.Icon
import javax.swing.JFrame
import javax.swing.JMenuItem
import javax.swing.JPopupMenu
import javax.swing.KeyStroke.getKeyStroke
import javax.swing.SwingUtilities
import org.jetbrains.skiko.hostOs

fun main() = SwingUtilities.invokeLater {
    val panel = ComposePanel()
    panel.setContent {
        JPopupTextMenuProvider(panel) {
            Column {
                SelectionContainer {
                    Text(&quot;Hello, World!&quot;)
                }

                var text by remember { mutableStateOf(&quot;&quot;) }

                TextField(text, { text = it })
            }
        }
    }

    val window = JFrame()
    window.contentPane.add(panel)
    window.size = Dimension(800, 600)
    window.isVisible = true
    window.title = &quot;Swing interop&quot;
}

@OptIn(ExperimentalFoundationApi::class)
@Composable
fun JPopupTextMenuProvider(owner: Component, content: @Composable () -&gt; Unit) {
    val localization = LocalLocalization.current
    CompositionLocalProvider(
        LocalTextContextMenu provides JPopupTextMenu(owner) { textManager, items -&gt;
            JPopupMenu().apply {
                textManager.cut?.also {
                    add(
                        swingItem(localization.cut, Color.RED, KeyEvent.VK_X, it)
                    )
                }
                textManager.copy?.also {
                    add(
                        swingItem(localization.copy, Color.GREEN, KeyEvent.VK_C, it)
                    )
                }
                textManager.paste?.also {
                    add(
                        swingItem(localization.paste, Color.BLUE, KeyEvent.VK_V, it)
                    )
                }
                textManager.selectAll?.also {
                    add(JPopupMenu.Separator())
                    add(
                        swingItem(localization.selectAll, Color.BLACK, KeyEvent.VK_A, it)
                    )
                }

                // Adds items that can be defined via ContextMenuDataProvider in other parts of the application 
                for (item in items) {
                    add(
                        JMenuItem(item.label).apply {
                            addActionListener { item.onClick() }
                        }
                    )
                }
            }
        },
        content = content
    )
}

private fun swingItem(
    label: String,
    color: Color,
    key: Int,
    onClick: () -&gt; Unit
) = JMenuItem(label).apply {
    icon = circleIcon(color)
    accelerator = getKeyStroke(key, if (hostOs.isMacOS) META_DOWN_MASK else CTRL_DOWN_MASK)
    addActionListener { onClick() }
}

private fun circleIcon(color: Color) = object : Icon {
    override fun paintIcon(c: Component?, g: Graphics, x: Int, y: Int) {
        g.create().apply {
            this.color = color
            translate(8, 2)
            fillOval(0, 0, 16, 16)
        }
    }

    override fun getIconWidth() = 16

    override fun getIconHeight() = 16
}
</div><figure id="-eyl3cb_58"><img alt="Context menu: Swing interoperability" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-context-menu-swing.png" title="Context menu: Swing interoperability" width="500" height="209"></figure></section></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next</h2><p id="-eyl3cb_62">Explore the tutorials about <a href="https://github.com/JetBrains/compose-multiplatform/tree/master/tutorials#desktop" id="-eyl3cb_63" data-external="true" rel="noopener noreferrer">other desktop components</a>.</p></section><div class="last-modified">Last modified: 27 May 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compose-desktop-tooltips.html" class="navigation-links__prev">Tooltips</a><a href="compose-desktop-mouse-events.html" class="navigation-links__next">Mouse event listeners</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.js"></script></body></html>