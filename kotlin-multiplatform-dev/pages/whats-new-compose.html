<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-25T13:01:20.100144122"><meta name="build-number" content="637"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>What's new in Compose Multiplatform 1.6.0 | Kotlin Multiplatform Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"dependencies","level":0,"title":"Dependencies","anchor":"#dependencies"},{"id":"breaking-changes","level":0,"title":"Breaking changes","anchor":"#breaking-changes"},{"id":"across-platforms","level":0,"title":"Across platforms","anchor":"#across-platforms"},{"id":"ios","level":0,"title":"iOS","anchor":"#ios"},{"id":"desktop","level":0,"title":"Desktop","anchor":"#desktop"},{"id":"web","level":0,"title":"Web","anchor":"#web"},{"id":"known-issues-missing-dependencies","level":0,"title":"Known issues: missing dependencies","anchor":"#known-issues-missing-dependencies"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><link rel="icon" type="image/x-icon" sizes="16x16" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"><link rel="icon" type="image/png" sizes="96x96" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"><link rel="icon" type="image/png" sizes="300x300" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"><link rel="icon" type="image/png" sizes="500x500" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="What's new in Compose Multiplatform 1.6.0 | Kotlin Multiplatform"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><meta property="og:site_name" content="Kotlin Multiplatform Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/kotlin-multiplatform-dev/whats-new-compose.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="What's new in Compose Multiplatform 1.6.0 | Kotlin Multiplatform"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/whats-new-compose.html#webpage",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/whats-new-compose.html",
    "name": "What's new in Compose Multiplatform 1.6.0 | Kotlin Multiplatform",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/#website",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/",
    "name": "Kotlin Multiplatform Help"
}</script><!-- End Schema.org --><meta name="msapplication-TileColor" content="#000000"/>
<meta name="msapplication-TileImage"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/>
<meta name="msapplication-square70x70logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/>
<meta name="msapplication-square150x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/>
<meta name="msapplication-wide310x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/>
<meta name="msapplication-square310x310logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>
<script>document.cookie="wh_theme=light;expires="+(new Date(Date.now()+500000000).toUTCString())+"; path=/;";</script>
<style>
<!--slack icon-->
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]{position:relative;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"] svg{visibility:hidden;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]::before{
display:block;content:"";position:absolute;top:0;bottom:0;left:0;right:0;
background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M9.586 6.601h1.9v-1.9a1.837 1.837 0 00-1.9-1.9 1.9 1.9 0 000 3.8zm1.9 7.6v4.7a1.837 1.837 0 01-1.9 1.9 1.9 1.9 0 01-1.9-1.9v-4.7a1.899 1.899 0 011.9-1.9 1.837 1.837 0 011.9 1.9zm-5.864 1.773a1.839 1.839 0 01-.737.127 1.9 1.9 0 010-3.8h1.9v1.9a1.839 1.839 0 01-1.163 1.773zm3.963-4.673h-4.7a1.9 1.9 0 010-3.8h4.7a1.838 1.838 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9zm11.4-1.9a1.967 1.967 0 00-1.9-1.9 1.899 1.899 0 00-1.9 1.9v1.9h1.9a1.9 1.9 0 001.9-1.9zm-5.862 1.773a1.839 1.839 0 01-.738.127 1.9 1.9 0 01-1.9-1.9v-4.7a1.839 1.839 0 011.9-1.9 1.898 1.898 0 011.9 1.9v4.7a1.837 1.837 0 01-1.162 1.773zm-.738 9.628a1.839 1.839 0 001.9-1.9 1.9 1.9 0 00-1.9-1.9h-1.9v1.9a1.899 1.899 0 001.9 1.9zm4.7-4.7h-4.7a1.9 1.9 0 110-3.8h4.7a1.836 1.836 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9z"/></svg>') no-repeat center;background-size:20px 20px;}
[data-test="footer-socials"]+.jb-footer__legal{flex-basis:100%;margin-top:8px;}

<!--Drop any switches and set default theme-->
.wh-header__switchers{display:none!important}
</style></head><body data-id="whats-new-compose" data-main-title="What's new in Compose Multiplatform 1.6.0" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Compose Multiplatform UI framework///What's new in Compose Multiplatform" data-edit-url="https://github.com/JetBrains/kotlin-multiplatform-dev-docs/edit/master/topics/whats-new/whats-new-compose.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin Multiplatform  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="whats-new-compose" id="whats-new-compose.md">What's new in Compose Multiplatform 1.6.0</h1><p id="-l5to6g_2">Here are the highlights of the Compose Multiplatform 1.6.0 release:</p><ul class="list _bullet" id="-l5to6g_3"><li class="list__item" id="-l5to6g_11"><p><a href="#breaking-changes" id="-l5to6g_19">Breaking changes</a></p></li><li class="list__item" id="-l5to6g_12"><p><a href="#improved-resources-api-all-platforms" id="-l5to6g_20">New and improved Resources API</a></p></li><li class="list__item" id="-l5to6g_13"><p><a href="#accessibility-support" id="-l5to6g_21">Basic support for iOS accessibility features</a></p></li><li class="list__item" id="-l5to6g_14"><p><a href="#ui-testing-api-experimental-all-platforms" id="-l5to6g_22">UI testing API for all platforms</a></p></li><li class="list__item" id="-l5to6g_15"><p><a href="#separate-platform-views-for-popups-dialogs-and-dropdowns-ios-desktop" id="-l5to6g_23">Separate platform views for popups, dialogs, and dropdowns</a>.</p></li><li class="list__item" id="-l5to6g_16"><p><a href="#changes-from-jetpack-compose-and-material-3-all-platforms" id="-l5to6g_24">Merged changes from Jetpack Compose and Material 3</a></p></li><li class="list__item" id="-l5to6g_17"><p><a href="#kotlin-wasm-artifacts-available-in-stable-versions-of-the-framework" id="-l5to6g_25">Kotlin/Wasm artifacts in stable versions</a></p></li><li class="list__item" id="-l5to6g_18"><p><a href="#known-issues-missing-dependencies" id="-l5to6g_26">Known issues: missing dependencies</a></p></li></ul><section class="chapter"><h2 id="dependencies" data-toc="dependencies">Dependencies</h2><p id="-l5to6g_27">This version of Compose Multiplatform is based on the following Jetpack Compose libraries:</p><ul class="list _bullet" id="-l5to6g_28"><li class="list__item" id="-l5to6g_29"><p><a href="https://developer.android.com/jetpack/androidx/releases/compose-compiler#1.5.8" id="-l5to6g_35" data-external="true" rel="noopener noreferrer">Compiler 1.5.8</a></p></li><li class="list__item" id="-l5to6g_30"><p><a href="https://developer.android.com/jetpack/androidx/releases/compose-runtime#1.6.1" id="-l5to6g_36" data-external="true" rel="noopener noreferrer">Runtime 1.6.1</a></p></li><li class="list__item" id="-l5to6g_31"><p><a href="https://developer.android.com/jetpack/androidx/releases/compose-ui#1.6.1" id="-l5to6g_37" data-external="true" rel="noopener noreferrer">UI 1.6.1</a></p></li><li class="list__item" id="-l5to6g_32"><p><a href="https://developer.android.com/jetpack/androidx/releases/compose-foundation#1.6.1" id="-l5to6g_38" data-external="true" rel="noopener noreferrer">Foundation 1.6.1</a></p></li><li class="list__item" id="-l5to6g_33"><p><a href="https://developer.android.com/jetpack/androidx/releases/compose-material#1.6.1" id="-l5to6g_39" data-external="true" rel="noopener noreferrer">Material 1.6.1</a></p></li><li class="list__item" id="-l5to6g_34"><p><a href="https://developer.android.com/jetpack/androidx/releases/compose-material3#1.2.0" id="-l5to6g_40" data-external="true" rel="noopener noreferrer">Material3 1.2.0</a></p></li></ul></section><section class="chapter"><h2 id="breaking-changes" data-toc="breaking-changes">Breaking changes</h2><section class="chapter"><h3 id="padding-for-text-with-lineheight-set-trimmed-by-default" data-toc="padding-for-text-with-lineheight-set-trimmed-by-default">Padding for text with lineHeight set trimmed by default</h3><p id="-l5to6g_44">With the added support for <a href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Trim" id="-l5to6g_47" data-external="true" rel="noopener noreferrer">LineHeightStyle.Trim</a>, Compose Multiplatform aligns with Android in the way text padding is trimmed. See <a href="https://github.com/JetBrains/compose-multiplatform-core/pull/897" id="-l5to6g_48" data-external="true" rel="noopener noreferrer">the pull request</a> for details.</p><p id="-l5to6g_45">This is in line with <code class="code" id="-l5to6g_49">compose.material</code> changes from <a href="https://developer.android.com/jetpack/androidx/releases/compose-material#1.6.0-alpha01" id="-l5to6g_50" data-external="true" rel="noopener noreferrer">the 1.6.0-alpha01 release</a>:</p><ul class="list _bullet" id="-l5to6g_46"><li class="list__item" id="-l5to6g_51"><p>The <code class="code" id="-l5to6g_54">includeFontPadding</code> parameter became <code class="code" id="-l5to6g_55">false</code> on Android by default. For a deeper understanding of this change, see <a href="https://github.com/JetBrains/compose-multiplatform/issues/2477#issuecomment-1825716543" id="-l5to6g_56" data-external="true" rel="noopener noreferrer">the discussion on not implementing this flag in Compose Multiplatform</a>.</p></li><li class="list__item" id="-l5to6g_52"><p>The default line height style has been changed to <code class="code" id="-l5to6g_57">Trim.None</code> and <code class="code" id="-l5to6g_58">Alignment.Center</code>. Compose Multiplatform now supports <code class="code" id="-l5to6g_59">LineHeightStyle.Trim</code> and implements <code class="code" id="-l5to6g_60">Trim.None</code> as the default value.</p></li><li class="list__item" id="-l5to6g_53"><p>Explicit <code class="code" id="-l5to6g_61">lineHeight</code> have been added to <code class="code" id="-l5to6g_62">TextStyle</code> of <code class="code" id="-l5to6g_63">Typography</code>, which led to the <a href="#using-fontsize-in-materialtheme-requires-lineheight" id="-l5to6g_64">next breaking change</a>.</p></li></ul></section><section class="chapter"><h3 id="using-fontsize-in-materialtheme-requires-lineheight" data-toc="using-fontsize-in-materialtheme-requires-lineheight">Using fontSize in MaterialTheme requires lineHeight</h3><aside class="prompt" data-type="note" data-title="" id="-l5to6g_65"><p id="-l5to6g_69">This affects only <code class="code" id="-l5to6g_70">material</code> components. <code class="code" id="-l5to6g_71">material3</code> already had this restriction.</p></aside><p id="-l5to6g_66">If you set the <code class="code" id="-l5to6g_72">fontSize</code> attribute for a <code class="code" id="-l5to6g_73">Text</code> component in <code class="code" id="-l5to6g_74">MaterialTheme</code> but don't include <code class="code" id="-l5to6g_75">lineHeight</code>, the actual line height will not be modified to match the font. Now, you have to explicitly specify the <code class="code" id="-l5to6g_76">lineHeight</code> attribute every time you set the corresponding <code class="code" id="-l5to6g_77">fontSize</code>.</p><p id="-l5to6g_67">Jetpack Compose now <a href="https://issuetracker.google.com/issues/321872412" id="-l5to6g_78" data-external="true" rel="noopener noreferrer">recommends</a> not setting the font size directly:</p><aside class="prompt" data-type="tip" data-title="" id="-l5to6g_68"><p id="-l5to6g_79">To support non-standard text sizes, we encourage users to follow the Material design system and use a different <a href="https://m2.material.io/design/typography/the-type-system.html#type-scale" id="-l5to6g_80" data-external="true" rel="noopener noreferrer">type scale</a> rather than changing the font size directly. Alternatively, users can overwrite the line height like so: <code class="code" id="-l5to6g_81">style = LocalTextStyle.current.copy(lineHeight = TextUnit.Unspecified)</code>, or create a custom <code class="code" id="-l5to6g_82">Typography</code> entirely.</p></aside></section><section class="chapter"><h3 id="new-approach-to-resource-organization" data-toc="new-approach-to-resource-organization">New approach to resource organization</h3><p id="-l5to6g_83">If you have been using the resources API in preview versions of Compose Multiplatform 1.6.0, familiarize yourself with <a href="compose-multiplatform-resources.html" id="-l5to6g_84">the documentation for the current version</a>: 1.6.0-beta01 changed the way resource files should be stored in the project folders to be available to the project code.</p></section></section><section class="chapter"><h2 id="across-platforms" data-toc="across-platforms">Across platforms</h2><section class="chapter"><h3 id="improved-resources-api-all-platforms" data-toc="improved-resources-api-all-platforms">Improved resources API (all platforms)</h3><p id="-l5to6g_91">The new experimental API adds support for strings and fonts and allows you to share and access resources in common Kotlin more comfortably:</p><ul class="list _bullet" id="-l5to6g_92"><li class="list__item" id="-l5to6g_94"><p>Resources can be organized according to specific settings or constraints they are designed for, supporting: </p><ul class="list _bullet" id="-l5to6g_96"><li class="list__item" id="-l5to6g_97"><p>Locales</p></li><li class="list__item" id="-l5to6g_98"><p>Image resolutions</p></li><li class="list__item" id="-l5to6g_99"><p>Dark and light themes</p></li></ul></li><li class="list__item" id="-l5to6g_95"><p>Compose Multiplatform now generates a <code class="code" id="-l5to6g_100">Res</code> object for each project to provide straightforward resource access.</p></li></ul><p id="-l5to6g_93">For a closer look at resource qualifiers, as well as a more in-depth overview of the new resources API, see <a href="compose-multiplatform-resources.html" id="-l5to6g_101">Images and resources</a>.</p></section><section class="chapter"><h3 id="ui-testing-api-experimental-all-platforms" data-toc="ui-testing-api-experimental-all-platforms">UI testing API (Experimental, all platforms)</h3><p id="-l5to6g_102">The experimental API for UI testing with Compose Multiplatform, which was already available for desktop and Android, now supports all platforms. You can write and run common tests that validate the behavior of your application's UI across platforms supported by the framework. The API uses the same finders, assertions, actions, and matchers as Jetpack Compose.</p><aside class="prompt" data-type="note" data-title="" id="-l5to6g_103"><p id="-l5to6g_105">JUnit-based tests are supported only in desktop projects.</p></aside><p id="-l5to6g_104">For the setup instructions and test examples, see <a href="compose-test.html" id="-l5to6g_106">Testing Compose Multiplatform UI</a>.</p></section><section class="chapter"><h3 id="changes-from-jetpack-compose-and-material-3-all-platforms" data-toc="changes-from-jetpack-compose-and-material-3-all-platforms">Changes from Jetpack Compose and Material 3 (all platforms)</h3><section class="chapter"><h4 id="jetpack-compose-1-6-1" data-toc="jetpack-compose-1-6-1">Jetpack Compose 1.6.1</h4><p id="-l5to6g_109">Merging the latest release of Jetpack Compose positively affects performance on all platforms. For details, see <a href="https://android-developers.googleblog.com/2024/01/whats-new-in-jetpack-compose-january-24-release.html" id="-l5to6g_115" data-external="true" rel="noopener noreferrer">the announcement on the Android Developers Blog</a>.</p><p id="-l5to6g_110">Other notable features from this release:</p><ul class="list _bullet" id="-l5to6g_111"><li class="list__item" id="-l5to6g_116"><p>The change to default font padding came into effect only for Android targets. However, make sure to take into account a <a href="#using-fontsize-in-materialtheme-requires-lineheight" id="-l5to6g_118">side effect</a> of this change.</p></li><li class="list__item" id="-l5to6g_117"><p>Mouse selection was already supported in Compose Multiplatform for other targets. With 1.6.0, this includes Android, too.</p></li></ul><p id="-l5to6g_112">Jetpack Compose features that are not ported to Compose Multiplatform yet:</p><ul class="list _bullet" id="-l5to6g_113"><li class="list__item" id="-l5to6g_119"><p><a href="https://github.com/JetBrains/compose-multiplatform/issues/4218" id="-l5to6g_123" data-external="true" rel="noopener noreferrer">BasicTextField2</a></p></li><li class="list__item" id="-l5to6g_120"><p><a href="https://github.com/JetBrains/compose-multiplatform/issues/4305" id="-l5to6g_124" data-external="true" rel="noopener noreferrer">Support for nonlinear font scaling</a></p></li><li class="list__item" id="-l5to6g_121"><p><a href="https://github.com/JetBrains/compose-multiplatform/issues/4236" id="-l5to6g_125" data-external="true" rel="noopener noreferrer">MultiParagraph.fillBoundingBoxes</a></p></li><li class="list__item" id="-l5to6g_122"><p><a href="https://github.com/JetBrains/compose-multiplatform/issues/4235" id="-l5to6g_126" data-external="true" rel="noopener noreferrer">Multiplatform drag and drop</a>. Works only on Android right now. On desktop, you can use an existing API, <code class="code" id="-l5to6g_127">Modifier.onExternalDrag</code>.</p></li></ul><p id="-l5to6g_114">The JetBrains team is working on adopting these features in upcoming versions of Compose Multiplatform.</p></section><section class="chapter"><h4 id="compose-material-3-1-2-0" data-toc="compose-material-3-1-2-0">Compose Material 3 1.2.0</h4><p id="-l5to6g_128">Release highlights:</p><ul class="list _bullet" id="-l5to6g_129"><li class="list__item" id="-l5to6g_131"><p>A new experimental component <code class="code" id="-l5to6g_133">Segmented Button</code>, with single and multiple selection.</p></li><li class="list__item" id="-l5to6g_132"><p>Expanded color set with more surface options to make it easier to emphasize information in your UI. </p><ul class="list _bullet" id="-l5to6g_134"><li class="list__item" id="-l5to6g_135"><p>Implementation note: the <code class="code" id="-l5to6g_137">ColorScheme</code> object is now immutable. If your code currently modifies the colors in <code class="code" id="-l5to6g_138">ColorScheme</code> directly, you will need to make use of the <a href="https://developer.android.com/reference/kotlin/androidx/compose/material3/ColorScheme#copy(androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color)" id="-l5to6g_139" data-external="true" rel="noopener noreferrer">copy</a> method now to change colors.</p></li><li class="list__item" id="-l5to6g_136"><p>Instead of a single surface value, there are now several options for surface color and surface container for more flexible color management.</p></li></ul></li></ul><p id="-l5to6g_130">For more details on changes in Material 3, see <a href="https://material.io/blog/material-3-compose-1-2" id="-l5to6g_140" data-external="true" rel="noopener noreferrer">the release post on the Material Design Blog</a>.</p></section></section><section class="chapter"><h3 id="separate-platform-views-for-popups-dialogs-and-dropdowns-ios-desktop" data-toc="separate-platform-views-for-popups-dialogs-and-dropdowns-ios-desktop">Separate platform views for popups, dialogs, and dropdowns (iOS, desktop)</h3><p id="-l5to6g_141">Sometimes, it's important that popup elements (for example, tooltips and dropdown menus) are not limited by the initial composable canvas or the app window. This becomes especially relevant if the composable view does not occupy the full screen but needs to spawn an alert dialog. In 1.6.0, there is a way to achieve that reliably.</p><p id="-l5to6g_142">Note that popups and dialogs are still unable to draw anything out of their own bounds (for example, a shadow of the topmost container).</p><section class="chapter"><h4 id="ios-stable" data-toc="ios-stable">iOS (Stable)</h4><p id="-l5to6g_145">On iOS, the feature is active by default. To switch back to the old behavior, set the <code class="code" id="-l5to6g_147">platformLayers</code> parameter to <code class="code" id="-l5to6g_148">false</code>:</p><div class="code-block" data-lang="kotlin">
ComposeUIViewController(
    configure = {
        platformLayers = false
    }
) {
    // your Compose code
}
</div></section><section class="chapter"><h4 id="desktop-experimental" data-toc="desktop-experimental">Desktop (Experimental)</h4><p id="-l5to6g_149">To use the feature on desktop, set the <code class="code" id="-l5to6g_155">compose.layers.type</code> system property. Supported values:</p><ul class="list _bullet" id="-l5to6g_150"><li class="list__item" id="-l5to6g_156"><p><code class="code" id="-l5to6g_158">WINDOW</code>, for creating <code class="code" id="-l5to6g_159">Popup</code> and <code class="code" id="-l5to6g_160">Dialog</code> components as separate undecorated windows.</p></li><li class="list__item" id="-l5to6g_157"><p><code class="code" id="-l5to6g_161">COMPONENT</code>, for creating <code class="code" id="-l5to6g_162">Popup</code> or <code class="code" id="-l5to6g_163">Dialog</code> as a separate Swing component in the same window. It works only with offscreen rendering, with <code class="code" id="-l5to6g_164">compose.swing.render.on.graphics</code> set to <code class="code" id="-l5to6g_165">true</code> (see the <a href="https://blog.jetbrains.com/kotlin/2023/08/compose-multiplatform-1-5-0-release/#enhanced-swing-interop" id="-l5to6g_166" data-external="true" rel="noopener noreferrer">Enhanced Swing interop</a> section of the 1.5.0 Compose Multiplatform release notes). Note that offscreen rendering only works for <code class="code" id="-l5to6g_167">ComposePanel</code> components, not full window applications.</p></li></ul><p id="-l5to6g_151">An example of the code that uses the <code class="code" id="-l5to6g_168">COMPONENT</code> property:</p><div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-synopsis="val window = JFrame()">
@OptIn(ExperimentalComposeUiApi::class)
fun main() = SwingUtilities.invokeLater {
    System.setProperty(&quot;compose.swing.render.on.graphics&quot;, &quot;true&quot;)
    System.setProperty(&quot;compose.layers.type&quot;, &quot;COMPONENT&quot;)

    val window = JFrame()
    window.defaultCloseOperation = WindowConstants.EXIT_ON_CLOSE

    val contentPane = JLayeredPane()
    contentPane.layout = null

    val composePanel = ComposePanel()
    composePanel.setBounds(200, 200, 200, 200)
    composePanel.setContent {
      ComposeContent()
    }
    composePanel.windowContainer = contentPane  // Use the full window for dialogs
    contentPane.add(composePanel)

    window.contentPane.add(contentPane)
    window.setSize(800, 600)
    window.isVisible = true
  }

@Composable
fun ComposeContent() {
    Box(Modifier.fillMaxSize().background(Color.Green)) {
        Dialog(onDismissRequest = {}) {
            Box(Modifier.size(100.dp).background(Color.Yellow))
        }
    }
}
</div><p id="-l5to6g_153">The <code class="code" id="-l5to6g_169">Dialog</code> (yellow) is drawn in full, regardless of the bounds of the parent <code class="code" id="-l5to6g_170">ComposePanel</code> (green):</p><figure id="-l5to6g_154"><img alt="Dialog outside the bounds of the parent panel" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-desktop-separate-dialog.png" title="Dialog outside the bounds of the parent panel" width="700" height="511"></figure></section></section><section class="chapter"><h3 id="support-for-text-decoration-line-styles-ios-desktop-web" data-toc="support-for-text-decoration-line-styles-ios-desktop-web">Support for text decoration line styles (iOS, desktop, web)</h3><p id="-l5to6g_171">Compose Multiplatform now allows setting underline styles for text using the <code class="code" id="-l5to6g_176">PlatformTextStyle</code> class.</p><aside class="prompt" data-type="warning" data-title="" id="-l5to6g_172"><p id="-l5to6g_177">The class is not available in the common source set and needs to be used in platform-specific code.</p></aside><p id="-l5to6g_173">An example of setting a dotted underline style:</p><div class="code-block" data-lang="kotlin">
Text(
  &quot;Hello, Compose&quot;,
  style = TextStyle(
    textDecoration = TextDecoration.Underline,
    platformStyle = PlatformTextStyle (
      textDecorationLineStyle = TextDecorationLineStyle.Dotted
    )
  )
)
</div><p id="-l5to6g_175">You can use solid, double-width solid, dotted, dashed, and wavy line styles. See all available options in <a href="https://github.com/JetBrains/compose-multiplatform-core/blob/jb-main/compose/ui/ui-text/src/skikoMain/kotlin/androidx/compose/ui/text/TextDecorationLineStyle.kt#L21" id="-l5to6g_178" data-external="true" rel="noopener noreferrer">the source code</a>.</p></section><section class="chapter"><h3 id="accessing-fonts-installed-on-the-system-ios-desktop-web" data-toc="accessing-fonts-installed-on-the-system-ios-desktop-web">Accessing fonts installed on the system (iOS, desktop, web)</h3><p id="-l5to6g_179">You can now access fonts installed on the system from your Compose Multiplatform app: use the <code class="code" id="-l5to6g_183">SystemFont</code> class to load fonts with appropriate font styles and font weights:</p><div class="code-block" data-lang="kotlin">
import androidx.compose.ui.text.platform.SystemFont

FontFamily(SystemFont(&quot;Menlo&quot;, weight = 700))
FontFamily(SystemFont(&quot;Times New Roman&quot;, FontWeight.Bold))
FontFamily(SystemFont(&quot;Webdings&quot;))
</div><p id="-l5to6g_181">On desktop, you can use the <code class="code" id="-l5to6g_184">FontFamily</code> function to load all possible font styles by specifying a font family name only (see <a href="https://github.com/JetBrains/compose-multiplatform-core/blob/release/1.6.0/compose/desktop/desktop/samples/src/jvmMain/kotlin/androidx/compose/desktop/examples/fonts/Fonts.jvm.kt" id="-l5to6g_185" data-external="true" rel="noopener noreferrer">the code sample</a> for an extensive example):</p><div class="code-block" data-lang="kotlin">
FontFamily(&quot;Menlo&quot;)
</div></section></section><section class="chapter"><h2 id="ios" data-toc="ios">iOS</h2><section class="chapter"><h3 id="accessibility-support" data-toc="accessibility-support">Accessibility support</h3><p id="-l5to6g_191">Compose Multiplatform for iOS now allows people with disabilities to interact with Compose UI with the same level of comfort as with the native iOS UI:</p><ul class="list _bullet" id="-l5to6g_192"><li class="list__item" id="-l5to6g_195"><p>Screen readers and VoiceOver can access the content of the Compose UI.</p></li><li class="list__item" id="-l5to6g_196"><p>Compose UI supports the same gestures as the native UIs for navigation and interaction.</p></li></ul><p id="-l5to6g_193">This also means that you can make the Compose Multiplatform semantic data available to Accessibility Services and the XCTest framework.</p><p id="-l5to6g_194">For details on implementation and customization API, see <a href="compose-ios-accessibility.html" id="-l5to6g_197">Support for iOS accessibility features</a>.</p></section><section class="chapter"><h3 id="changing-opacity-for-composable-view" data-toc="changing-opacity-for-composable-view">Changing opacity for composable view</h3><p id="-l5to6g_198">The <code class="code" id="-l5to6g_203">ComposeUIViewController</code> class has one more configuration option now, changing the opacity of a view's background to be transparent.</p><aside class="prompt" data-type="note" data-title="" id="-l5to6g_199"><p id="-l5to6g_204">Transparent background negatively affects performance as it leads to an additional blending step.</p></aside><div class="code-block" data-lang="kotlin">
val appController = ComposeUIViewController(configure = {
      this.opaque = false
}) {
    App()
}
</div><p id="-l5to6g_201">An example of what a transparent background can help you achieve:</p><figure id="-l5to6g_202"><img alt="Compose opaque = false demo" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-opaque-property.png" title="Compose opaque = false demo" width="700" height="280"></figure></section><section class="chapter"><h3 id="selecting-text-in-selectioncontainer-by-double-and-triple-tap" data-toc="selecting-text-in-selectioncontainer-by-double-and-triple-tap">Selecting text in SelectionContainer by double and triple tap</h3><p id="-l5to6g_205">Previously, Compose Multiplatform for iOS allowed users to use multiple tap for selecting text only in text input fields. Now, double and triple tap gestures also work for selecting text displayed in <code class="code" id="-l5to6g_206">Text</code> components inside a <code class="code" id="-l5to6g_207">SelectionContainer</code>.</p></section><section class="chapter"><h3 id="interop-with-uiviewcontroller" data-toc="interop-with-uiviewcontroller">Interop with UIViewController</h3><p id="-l5to6g_208">Some native APIs that are not implemented as <code class="code" id="-l5to6g_210">UIView</code>, for example, <code class="code" id="-l5to6g_211">UITabBarController</code>, or <code class="code" id="-l5to6g_212">UINavigationController</code> could not be embedded into a Compose Multiplatform UI using <a href="compose-uikit-integration.html" id="-l5to6g_213">the existing interop mechanism</a>.</p><p id="-l5to6g_209">Now, Compose Multiplatform implements the <code class="code" id="-l5to6g_214">UIKitViewController</code> function that allows you to embed native iOS view controllers in your Compose UI.</p></section><section class="chapter"><h3 id="native-like-caret-behavior-by-long-single-taps-in-text-fields" data-toc="native-like-caret-behavior-by-long-single-taps-in-text-fields">Native-like caret behavior by long/single taps in text fields</h3><p id="-l5to6g_215">Compose Multiplatform is now closer to the native iOS behavior of a caret in a text field:</p><ul class="list _bullet" id="-l5to6g_216"><li class="list__item" id="-l5to6g_217"><p>The position of the caret after a single tap in a text field is determined with more precision.</p></li><li class="list__item" id="-l5to6g_218"><p>Long tap and drag in a text field leads to moving the cursor, not entering selection mode like on Android.</p></li></ul></section></section><section class="chapter"><h2 id="desktop" data-toc="desktop">Desktop</h2><section class="chapter"><h3 id="experimental-support-of-improved-interop-blending" data-toc="experimental-support-of-improved-interop-blending">Experimental support of improved interop blending</h3><p id="-l5to6g_220">In the past, the interop view implemented using the <code class="code" id="-l5to6g_223">SwingPanel</code> wrapper was always rectangular, and always in the foreground, on top of any Compose Multiplatform components. This made any popup elements (dropdown menus, toast notifications) challenging to use. With a new implementation, this issue is resolved, and you can now rely on Swing in the following use cases:</p><ul class="list _bullet" id="-l5to6g_221"><li class="list__item" id="-l5to6g_224"><p id="-l5to6g_226">Clipping. You're not limited by a rectangular shape: clip and shadow modifiers work correctly with SwingPanel now.</p><div class="code-block" data-lang="kotlin">
// Flag necessary to enable the experimental blending 
System.setProperty(&quot;compose.interop.blending&quot;, &quot;true&quot;)

SwingPanel(
    modifier = Modifier.clip(RoundedCornerShape(6.dp))
    //...
)
</div><p id="-l5to6g_228">You can see the way a <code class="code" id="-l5to6g_230">JButton</code> is clipped without this feature on the left, and the experimental blending on the right:</p><figure id="-l5to6g_229"><img alt="Correct clipping with SwingPanel" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-swingpanel-clipping.png" title="Correct clipping with SwingPanel" width="956" height="202"></figure></li><li class="list__item" id="-l5to6g_225"><p id="-l5to6g_231">Overlapping. It is possible to draw any Compose Multiplatform content on top of a <code class="code" id="-l5to6g_233">SwingPanel</code> and interact with it as usual. Here, &quot;Snackbar&quot; is on top of the Swing panel with a clickable <span class="control" id="-l5to6g_234">OK</span> button:</p><figure id="-l5to6g_232"><img alt="Correct overlapping with SwingPanel" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/compose-swingpanel-overlapping.png" title="Correct overlapping with SwingPanel" width="1200" height="800"></figure></li></ul><p id="-l5to6g_222">See known limitations and additional details in <a href="https://github.com/JetBrains/compose-multiplatform-core/pull/915" id="-l5to6g_235" data-external="true" rel="noopener noreferrer">the description of the pull request</a>.</p></section></section><section class="chapter"><h2 id="web" data-toc="web">Web</h2><section class="chapter"><h3 id="kotlin-wasm-artifacts-available-in-stable-versions-of-the-framework" data-toc="kotlin-wasm-artifacts-available-in-stable-versions-of-the-framework">Kotlin/Wasm artifacts available in stable versions of the framework</h3><p id="-l5to6g_237">Stable versions of Compose Multiplatform support Kotlin/Wasm targets now. After you switch to 1.6.0, you don't have to specify a particular <code class="code" id="-l5to6g_239">dev-wasm</code> version of the <code class="code" id="-l5to6g_240">compose-ui</code> library in your list of dependencies.</p><aside class="prompt" data-type="warning" data-title="" id="-l5to6g_238"><p id="-l5to6g_241">To build a Compose Multiplatform project with a Wasm target, you need to have Kotlin 1.9.22 and later.</p></aside></section></section><section class="chapter"><h2 id="known-issues-missing-dependencies" data-toc="known-issues-missing-dependencies">Known issues: missing dependencies</h2><p id="-l5to6g_242">There are a couple of libraries that can be missing with a default project configuration:</p><ul class="list _bullet" id="-l5to6g_243"><li class="list__item" id="-l5to6g_244"><p id="-l5to6g_246"><code class="code" id="-l5to6g_250">org.jetbrains.compose.annotation-internal:annotation</code> or <code class="code" id="-l5to6g_251">org.jetbrains.compose.collection-internal:collection</code></p><p id="-l5to6g_247">They may be missing if a library depends on Compose Multiplatform 1.6.0-beta02, which isn't binary compatible with 1.6.0. To figure out which library that is, run this command (replace <code class="code" id="-l5to6g_252">shared</code> with the name of your main module):</p><div class="code-block" data-lang="bash">
./gradlew shared:dependencies
</div><p id="-l5to6g_249">Downgrade the library to a version depending on Compose Multiplatform 1.5.12, or ask the library author to upgrade it to Compose Multiplatform 1.6.0.</p></li><li class="list__item" id="-l5to6g_245"><p id="-l5to6g_253"><code class="code" id="-l5to6g_257">androidx.annotation:annotation:...</code> or <code class="code" id="-l5to6g_258">androidx.collection:collection:...</code></p><p id="-l5to6g_254">Compose Multiplatform 1.6.0 depends on <a href="https://developer.android.com/jetpack/androidx/releases/collection" id="-l5to6g_259" data-external="true" rel="noopener noreferrer">collection</a> and <a href="https://developer.android.com/jetpack/androidx/releases/annotation" id="-l5to6g_260" data-external="true" rel="noopener noreferrer">annotation</a> libraries that are available only in the Google Maven repository.</p><p id="-l5to6g_255">To make this repository available to your project, add the following line to the <code class="code" id="-l5to6g_261">build.gradle.kts</code> file of the module:</p><div class="code-block" data-lang="kotlin">
repositories {
    //...
    google()
}
</div></li></ul></section><div class="last-modified">Last modified: 25 September 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="whats-new-compose-1610.html" class="navigation-links__prev">What's new in Compose Multiplatform 1.6.10</a><a href="compose-multiplatform-and-jetpack-compose.html" class="navigation-links__next">Compose Multiplatform and Jetpack Compose</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.js"></script></body></html>