<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-25T13:01:21.760733319"><meta name="build-number" content="637"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>iOS migration guides | Kotlin Multiplatform Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"compose-multiplatform-1-6-11-to-1-7-0","level":0,"title":"Compose Multiplatform 1.6.11 to 1.7.0","anchor":"#compose-multiplatform-1-6-11-to-1-7-0"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><link rel="icon" type="image/x-icon" sizes="16x16" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"><link rel="icon" type="image/png" sizes="96x96" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"><link rel="icon" type="image/png" sizes="300x300" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"><link rel="icon" type="image/png" sizes="500x500" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="iOS migration guides | Kotlin Multiplatform"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><meta property="og:site_name" content="Kotlin Multiplatform Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-ios-migration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="iOS migration guides | Kotlin Multiplatform"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-ios-migration.html#webpage",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-ios-migration.html",
    "name": "iOS migration guides | Kotlin Multiplatform",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/#website",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/",
    "name": "Kotlin Multiplatform Help"
}</script><!-- End Schema.org --><meta name="msapplication-TileColor" content="#000000"/>
<meta name="msapplication-TileImage"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/>
<meta name="msapplication-square70x70logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/>
<meta name="msapplication-square150x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/>
<meta name="msapplication-wide310x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/>
<meta name="msapplication-square310x310logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>
<script>document.cookie="wh_theme=light;expires="+(new Date(Date.now()+500000000).toUTCString())+"; path=/;";</script>
<style>
<!--slack icon-->
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]{position:relative;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"] svg{visibility:hidden;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]::before{
display:block;content:"";position:absolute;top:0;bottom:0;left:0;right:0;
background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M9.586 6.601h1.9v-1.9a1.837 1.837 0 00-1.9-1.9 1.9 1.9 0 000 3.8zm1.9 7.6v4.7a1.837 1.837 0 01-1.9 1.9 1.9 1.9 0 01-1.9-1.9v-4.7a1.899 1.899 0 011.9-1.9 1.837 1.837 0 011.9 1.9zm-5.864 1.773a1.839 1.839 0 01-.737.127 1.9 1.9 0 010-3.8h1.9v1.9a1.839 1.839 0 01-1.163 1.773zm3.963-4.673h-4.7a1.9 1.9 0 010-3.8h4.7a1.838 1.838 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9zm11.4-1.9a1.967 1.967 0 00-1.9-1.9 1.899 1.899 0 00-1.9 1.9v1.9h1.9a1.9 1.9 0 001.9-1.9zm-5.862 1.773a1.839 1.839 0 01-.738.127 1.9 1.9 0 01-1.9-1.9v-4.7a1.839 1.839 0 011.9-1.9 1.898 1.898 0 011.9 1.9v4.7a1.837 1.837 0 01-1.162 1.773zm-.738 9.628a1.839 1.839 0 001.9-1.9 1.9 1.9 0 00-1.9-1.9h-1.9v1.9a1.899 1.899 0 001.9 1.9zm4.7-4.7h-4.7a1.9 1.9 0 110-3.8h4.7a1.836 1.836 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9z"/></svg>') no-repeat center;background-size:20px 20px;}
[data-test="footer-socials"]+.jb-footer__legal{flex-basis:100%;margin-top:8px;}

<!--Drop any switches and set default theme-->
.wh-header__switchers{display:none!important}
</style></head><body data-id="compose-ios-migration" data-main-title="iOS migration guides" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Compose Multiplatform UI framework///iOS-specific features" data-edit-url="https://github.com/JetBrains/kotlin-multiplatform-dev-docs/edit/master/topics/compose/ios/compose-ios-migration.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin Multiplatform  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compose-ios-migration" id="compose-ios-migration.md">iOS migration guides</h1><p id="-ehwzuc_2">This page walks you through iOS considerations for upgrading the Compose Multiplatform library in your project to a newer version, starting with 1.7.0.</p><section class="chapter"><h2 id="compose-multiplatform-1-6-11-to-1-7-0" data-toc="compose-multiplatform-1-6-11-to-1-7-0">Compose Multiplatform 1.6.11 to 1.7.0</h2><section class="chapter"><h3 id="removed-background-parameter-in-uikitview-and-uikitviewcontroller" data-toc="removed-background-parameter-in-uikitview-and-uikitviewcontroller">Removed background parameter in UIKitView and UIKitViewController</h3><p id="-ehwzuc_9">Deprecated <code class="code" id="-ehwzuc_11">UIKitView</code> and <code class="code" id="-ehwzuc_12">UIKitViewController</code> APIs have the <code class="code" id="-ehwzuc_13">background</code> parameter, while the new ones don't. The parameter was deemed redundant and removed:</p><ul class="list _bullet" id="-ehwzuc_10"><li class="list__item" id="-ehwzuc_14"><p>If you need to set the interop view background for new instances, you can do it using the <code class="code" id="-ehwzuc_16">factory</code> parameter.</p></li><li class="list__item" id="-ehwzuc_15"><p>If you need the background to be updatable, put the corresponding code in the <code class="code" id="-ehwzuc_17">update</code> lambda.</p></li></ul></section><section class="chapter"><h3 id="touches-or-gestures-may-stop-working-as-expected" data-toc="touches-or-gestures-may-stop-working-as-expected">Touches or gestures may stop working as expected</h3><p id="-ehwzuc_18">The new default <a href="compose-ios-touch.html" id="-ehwzuc_21">touch behavior</a> uses delays to determine if the touch is meant for the interop view or for the Compose container of that view: the user has to hold still for at least 150 ms before the interop view will receive it.</p><p id="-ehwzuc_19">If you need Compose Multiplatform to process touches like it used to, consider the new experimental <code class="code" id="-ehwzuc_22">UIKitInteropProperties</code> constructor. It has the <code class="code" id="-ehwzuc_23">interactionMode</code> parameter, which you can set to <code class="code" id="-ehwzuc_24">UIKitInteropInteractionMode.NonCooperative</code> to make Compose transfer touches directly to interop views.</p><p id="-ehwzuc_20">The constructor is marked experimental because we ultimately intend to keep the interactability of interop views described by a single bool flag. The behavior described explicitly in the <code class="code" id="-ehwzuc_25">interactionMode</code> parameter will most likely be derived automatically in the future.</p></section><section class="chapter"><h3 id="accessibilityenabled-replaced-by-isnativeaccessibilityenabled-and-turned-off-by-default" data-toc="accessibilityenabled-replaced-by-isnativeaccessibilityenabled-and-turned-off-by-default">accessibilityEnabled replaced by isNativeAccessibilityEnabled, and turned off by default</h3><p id="-ehwzuc_26">The <code class="code" id="-ehwzuc_29">accessibilityEnabled</code> parameter of the old <code class="code" id="-ehwzuc_30">UIKitView</code> and <code class="code" id="-ehwzuc_31">UIKitViewController</code> constructors was moved and renamed to be available as the <code class="code" id="-ehwzuc_32">UIKitInteropProperties.isNativeAccessibilityEnabled</code> property. It is also set to <code class="code" id="-ehwzuc_33">false</code> by default.</p><p id="-ehwzuc_27">The <code class="code" id="-ehwzuc_34">isNativeAccessibilityEnabled</code> property taints the merged Compose subtree with native accessibility resolution. So it is not recommended to set to true unless you need rich accessibility capabilities of the interop view (such as web views).</p><p id="-ehwzuc_28">For the rationale behind this property and its default value, see the <a href="https://github.com/JetBrains/compose-multiplatform-core/blob/jb-main/compose/ui/ui/src/uikitMain/kotlin/androidx/compose/ui/viewinterop/UIKitInteropProperties.uikit.kt" id="-ehwzuc_35" data-external="true" rel="noopener noreferrer">in-code documentation for the <code class="code" id="-ehwzuc_36">UIKitInteropProperties</code> class</a>.</p></section><section class="chapter"><h3 id="onresize-parameter-removed" data-toc="onresize-parameter-removed">onResize parameter removed</h3><p id="-ehwzuc_37">The <code class="code" id="-ehwzuc_40">onResize</code> parameter of the old <code class="code" id="-ehwzuc_41">UIKitView</code> and <code class="code" id="-ehwzuc_42">UIKitViewController</code> constructors set a custom frame based on the <code class="code" id="-ehwzuc_43">rect</code> argument but didn't affect the Compose layout itself, so it was not intuitive to use. On top of that, the default implementation of the <code class="code" id="-ehwzuc_44">onResize</code> parameter needed to properly set the frame of interop view and contained some implementation details about properly clipping the view. </p><p id="-ehwzuc_38">How to make do without <code class="code" id="-ehwzuc_45">onResize</code>:</p><ul class="list _bullet" id="-ehwzuc_39"><li class="list__item" id="-ehwzuc_46"><p>If you need to react to the interop view frame change, you can: </p><ul class="list _bullet" id="-ehwzuc_48"><li class="list__item" id="-ehwzuc_49"><p>override <a href="https://developer.apple.com/documentation/uikit/uiview/1622482-layoutsubviews" id="-ehwzuc_52" data-external="true" rel="noopener noreferrer"><code class="code" id="-ehwzuc_54">layoutSubviews</code></a> of the interop <code class="code" id="-ehwzuc_53">UIView</code>,</p></li><li class="list__item" id="-ehwzuc_50"><p>override <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621398-viewdidlayoutsubviews" id="-ehwzuc_55" data-external="true" rel="noopener noreferrer"><code class="code" id="-ehwzuc_57">viewDidLayoutSubviews</code></a> of the interop <code class="code" id="-ehwzuc_56">UIViewController</code>,</p></li><li class="list__item" id="-ehwzuc_51"><p>or add <code class="code" id="-ehwzuc_58">onGloballyPositioned</code> to the <code class="code" id="-ehwzuc_59">Modifier</code> chain.</p></li></ul></li><li class="list__item" id="-ehwzuc_47"><p>If you need to set the frame of your interop view, use the corresponding Compose modifiers: <code class="code" id="-ehwzuc_60">size</code>, <code class="code" id="-ehwzuc_61">fillMaxSize</code>, and so on.</p></li></ul></section><section class="chapter"><h3 id="some-onreset-usage-patterns-were-invalidated" data-toc="some-onreset-usage-patterns-were-invalidated">Some onReset usage patterns were invalidated</h3><p id="-ehwzuc_62">It is incorrect to use a non-null <code class="code" id="-ehwzuc_67">onReset</code> lambda along with <code class="code" id="-ehwzuc_68">remember { UIView() }</code>.</p><p id="-ehwzuc_63">Consider the following code:</p><div class="code-block" data-lang="kotlin">
val view = remember { UIView() }

UIKitView(factory = { view }, onReset = { /* ... */ })
</div><p id="-ehwzuc_65">When a <code class="code" id="-ehwzuc_69">UIKitView</code> enters the composition, either <code class="code" id="-ehwzuc_70">factory</code> or <code class="code" id="-ehwzuc_71">onReset</code> is called, never both. So, if <code class="code" id="-ehwzuc_72">onReset</code> is not null, the remembered <code class="code" id="-ehwzuc_73">view</code> can be different from the one that is shown onscreen: A composable can leave the composition and leave behind an instance of the view that will be reused after resetting it in <code class="code" id="-ehwzuc_74">onReset</code> instead of allocating a new one using <code class="code" id="-ehwzuc_75">factory</code>.</p><p id="-ehwzuc_66">To avoid such mistakes, don't specify an <code class="code" id="-ehwzuc_76">onReset</code> value in the constructor. You may need to perform callbacks from within the interop view based on the context in which the function emitting it entered the composition: In this case, consider storing the callback inside the view using <code class="code" id="-ehwzuc_77">update</code> on <code class="code" id="-ehwzuc_78">onReset</code>.</p></section></section><div class="last-modified">Last modified: 12 November 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compose-ios-accessibility.html" class="navigation-links__prev">Support for iOS accessibility features</a><a href="compose-android-only-components.html" class="navigation-links__next">Android-only components</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.js"></script></body></html>