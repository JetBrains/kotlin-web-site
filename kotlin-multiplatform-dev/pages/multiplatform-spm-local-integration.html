<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-25T13:01:23.374094895"><meta name="build-number" content="637"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Using Kotlin from local Swift packages | Kotlin Multiplatform Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"set-up-the-project","level":0,"title":"Set up the project","anchor":"#set-up-the-project"},{"id":"connect-the-framework-to-your-project","level":0,"title":"Connect the framework to your project","anchor":"#connect-the-framework-to-your-project"},{"id":"what-s-next","level":0,"title":"What\u0027s next","anchor":"#what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><link rel="icon" type="image/x-icon" sizes="16x16" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"><link rel="icon" type="image/png" sizes="96x96" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"><link rel="icon" type="image/png" sizes="300x300" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"><link rel="icon" type="image/png" sizes="500x500" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Using Kotlin from local Swift packages | Kotlin Multiplatform"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><meta property="og:site_name" content="Kotlin Multiplatform Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-spm-local-integration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Using Kotlin from local Swift packages | Kotlin Multiplatform"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-spm-local-integration.html#webpage",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-spm-local-integration.html",
    "name": "Using Kotlin from local Swift packages | Kotlin Multiplatform",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/#website",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/",
    "name": "Kotlin Multiplatform Help"
}</script><!-- End Schema.org --><meta name="msapplication-TileColor" content="#000000"/>
<meta name="msapplication-TileImage"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/>
<meta name="msapplication-square70x70logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/>
<meta name="msapplication-square150x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/>
<meta name="msapplication-wide310x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/>
<meta name="msapplication-square310x310logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>
<script>document.cookie="wh_theme=light;expires="+(new Date(Date.now()+500000000).toUTCString())+"; path=/;";</script>
<style>
<!--slack icon-->
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]{position:relative;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"] svg{visibility:hidden;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]::before{
display:block;content:"";position:absolute;top:0;bottom:0;left:0;right:0;
background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M9.586 6.601h1.9v-1.9a1.837 1.837 0 00-1.9-1.9 1.9 1.9 0 000 3.8zm1.9 7.6v4.7a1.837 1.837 0 01-1.9 1.9 1.9 1.9 0 01-1.9-1.9v-4.7a1.899 1.899 0 011.9-1.9 1.837 1.837 0 011.9 1.9zm-5.864 1.773a1.839 1.839 0 01-.737.127 1.9 1.9 0 010-3.8h1.9v1.9a1.839 1.839 0 01-1.163 1.773zm3.963-4.673h-4.7a1.9 1.9 0 010-3.8h4.7a1.838 1.838 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9zm11.4-1.9a1.967 1.967 0 00-1.9-1.9 1.899 1.899 0 00-1.9 1.9v1.9h1.9a1.9 1.9 0 001.9-1.9zm-5.862 1.773a1.839 1.839 0 01-.738.127 1.9 1.9 0 01-1.9-1.9v-4.7a1.839 1.839 0 011.9-1.9 1.898 1.898 0 011.9 1.9v4.7a1.837 1.837 0 01-1.162 1.773zm-.738 9.628a1.839 1.839 0 001.9-1.9 1.9 1.9 0 00-1.9-1.9h-1.9v1.9a1.899 1.899 0 001.9 1.9zm4.7-4.7h-4.7a1.9 1.9 0 110-3.8h4.7a1.836 1.836 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9z"/></svg>') no-repeat center;background-size:20px 20px;}
[data-test="footer-socials"]+.jb-footer__legal{flex-basis:100%;margin-top:8px;}

<!--Drop any switches and set default theme-->
.wh-header__switchers{display:none!important}
</style></head><body data-id="multiplatform-spm-local-integration" data-main-title="Using Kotlin from local Swift packages" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Set up iOS integration" data-edit-url="https://github.com/JetBrains/kotlin-multiplatform-dev-docs/edit/master/topics/development/multiplatform-spm-local-integration.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin Multiplatform  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="multiplatform-spm-local-integration" id="multiplatform-spm-local-integration.md">Using Kotlin from local Swift packages</h1><div class="micro-format" data-content="{&quot;microFormat&quot;:[&quot;\u003cp id\u003d\&quot;-qhzi5x_129\&quot;\u003eThis is a local integration method. It can work for you if:\u003c/p\u003e&quot;,&quot;\u003cbr\u003e&quot;,&quot;\u003cul class\u003d\&quot;list _bullet\&quot; id\u003d\&quot;-qhzi5x_12\&quot;\u003e\u003cli class\u003d\&quot;list__item\&quot; id\u003d\&quot;-qhzi5x_14\&quot;\u003e\u003cp\u003eYou have an iOS app with local SPM modules.\u003c/p\u003e\u003c/li\u003e\u003cli class\u003d\&quot;list__item\&quot; id\u003d\&quot;-qhzi5x_15\&quot;\u003e\u003cp\u003eYou\u0027ve already set up a Kotlin Multiplatform project targeting iOS on your local machine.\u003c/p\u003e\u003c/li\u003e\u003cli class\u003d\&quot;list__item\&quot; id\u003d\&quot;-qhzi5x_16\&quot;\u003e\u003cp\u003eYour existing iOS project has a static linking type. \u003c/p\u003e\u003cbr\u003e\u003c/li\u003e\u003c/ul\u003e&quot;,&quot;\u003cp id\u003d\&quot;-qhzi5x_13\&quot;\u003e\u003ca href\u003d\&quot;multiplatform-ios-integration-overview.html\&quot; id\u003d\&quot;-qhzi5x_18\&quot;\u003eChoose the integration method that suits you best\u003c/a\u003e\u003c/p\u003e&quot;]}"></div><p id="-qhzi5x_3">In this tutorial, you'll learn how to integrate a Kotlin framework from a Kotlin Multiplatform project into a local package using the Swift package manager (SPM).</p><figure id="-qhzi5x_4"><img alt="Direct integration diagram" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/direct-integration-scheme.svg" title="Direct integration diagram" width="700" height="263"></figure><p id="-qhzi5x_5">To set up the integration, you'll add a special script that uses the <code class="code" id="-qhzi5x_19">embedAndSignAppleFrameworkForXcode</code> Gradle task as a pre-action in your project's build settings. To see the changes made in common code reflected in your Xcode project, you'll only need to rebuild the Kotlin Multiplatform project.</p><p id="-qhzi5x_6">This way, you can easily use Kotlin code in local Swift packages, compared to a regular direct integration method that adds the script to the build phase and requires rebuilding both the Kotlin Multiplatform and the iOS project to get the changes from the common code.</p><aside class="prompt" data-type="tip" data-title="" id="-qhzi5x_7"><p id="-qhzi5x_20">If you aren't familiar with Kotlin Multiplatform, learn how to <a href="quickstart.html" id="-qhzi5x_21">set up the environment</a> and <a href="compose-multiplatform-create-first-app.html" id="-qhzi5x_22">create a cross-platform application from scratch</a> first.</p></aside><section class="chapter"><h2 id="set-up-the-project" data-toc="set-up-the-project">Set up the project</h2><p id="-qhzi5x_23">The feature is available starting with Kotlin 2.0.0.</p><aside class="prompt" data-type="tip" data-title="" id="-qhzi5x_24"><p id="-qhzi5x_28">To check the Kotlin version, navigate to the <code class="code" id="-qhzi5x_30">build.gradle(.kts)</code> file in the root of your Kotlin Multiplatform project. You'll see the current version in the <code class="code" id="-qhzi5x_31">plugins {}</code> block at the top of the file.</p><p id="-qhzi5x_29">Alternatively, check the version catalog in the <code class="code" id="-qhzi5x_32">gradle/libs.versions.toml</code> file.</p></aside><p id="-qhzi5x_25">The tutorial assumes that your project is using the <a href="multiplatform-direct-integration.html" id="-qhzi5x_33">direct integration</a> approach with the <code class="code" id="-qhzi5x_34">embedAndSignAppleFrameworkForXcode</code> task in the project's build phase. If you're connecting a Kotlin framework through the CocoaPods plugin or through Swift package with <code class="code" id="-qhzi5x_35">binaryTarget</code>, migrate first.</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="migrate-from-spm-binarytarget-integration" data-toc="migrate-from-spm-binarytarget-integration">Migrate from SPM binaryTarget integration</h3></div><div class="collapse__content"><p id="-qhzi5x_36">To migrate from the SPM integration with <code class="code" id="-qhzi5x_38">binaryTarget</code>:</p><ol class="list _decimal" id="-qhzi5x_37" type="1"><li class="list__item" id="-qhzi5x_39"><p>In Xcode, clean build directories using <span class="control" id="-qhzi5x_41">Product</span> | <span class="control" id="-qhzi5x_42">Clean Build Folder</span> or with the <kbd class="keystroke" id="-qhzi5x_43" data-bypass="true"><span class="keystroke__value">Cmd + Shift + K</span></kbd> shortcut.</p></li><li class="list__item" id="-qhzi5x_40"><p>In every <code class="code" id="-qhzi5x_44">Package.swift</code> file, remove both dependencies to the package with a Kotlin framework inside and target dependencies to the products.</p></li></ol></div></div></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="migrate-from-the-cocoapods-plugin" data-toc="migrate-from-the-cocoapods-plugin">Migrate from the CocoaPods plugin</h3></div><div class="collapse__content"><aside class="prompt" data-type="warning" data-title="" id="-qhzi5x_45"><p id="-qhzi5x_48">If you have dependencies on other Pods in the <code class="code" id="-qhzi5x_49">cocoapods {}</code> block, you have to resort to the CocoaPods integration approach. Currently, it's impossible to both have dependencies on Pods and on the Kotlin framework in a multimodal SPM project.</p></aside><p id="-qhzi5x_46">To migrate from the CocoaPods plugin:</p><ol class="list _decimal" id="-qhzi5x_47" type="1"><li class="list__item" id="-qhzi5x_50"><p id="-qhzi5x_54">In Xcode, clean build directories using <span class="control" id="-qhzi5x_55">Product</span> | <span class="control" id="-qhzi5x_56">Clean Build Folder</span> or with the <kbd class="keystroke" id="-qhzi5x_57" data-bypass="true"><span class="keystroke__value">Cmd + Shift + K</span></kbd> shortcut.</p></li><li class="list__item" id="-qhzi5x_51"><p id="-qhzi5x_58">In the directory with Podfile, run the following command:</p><div class="code-block" data-lang="none">
pod deintegrate
</div></li><li class="list__item" id="-qhzi5x_52"><p id="-qhzi5x_60">Remove the <code class="code" id="-qhzi5x_61">cocoapods {}</code> block from your <code class="code" id="-qhzi5x_62">build.gradle(.kts)</code> files.</p></li><li class="list__item" id="-qhzi5x_53"><p id="-qhzi5x_63">Delete the <code class="code" id="-qhzi5x_64">.podspec</code> file and the Podfile.</p></li></ol></div></div></section></section><section class="chapter"><h2 id="connect-the-framework-to-your-project" data-toc="connect-the-framework-to-your-project">Connect the framework to your project</h2><aside class="prompt" data-type="note" data-title="" id="-qhzi5x_65"><p id="-qhzi5x_70">The integration into <code class="code" id="-qhzi5x_71">swift build</code> is currently not supported.</p></aside><p id="-qhzi5x_66">To be able to use Kotlin code in a local Swift package, connect the Kotlin framework generated from the multiplatform project to your Xcode project:</p><ol class="list _decimal" id="-qhzi5x_67" type="1"><li class="list__item" id="-qhzi5x_72"><p id="-qhzi5x_79">In Xcode, go to <span class="control" id="-qhzi5x_81">Product</span> | <span class="control" id="-qhzi5x_82">Scheme</span> | <span class="control" id="-qhzi5x_83">Edit scheme</span> or click the scheme icon in the top bar and select <span class="control" id="-qhzi5x_84">Edit scheme</span>:</p><figure id="-qhzi5x_80"><img alt="Edit scheme" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/xcode-edit-schemes.png" title="Edit scheme" width="700" height="350"></figure></li><li class="list__item" id="-qhzi5x_73"><p id="-qhzi5x_85">Select the <span class="control" id="-qhzi5x_87">Build</span> | <span class="control" id="-qhzi5x_88">Pre-actions</span> item, then click <span class="control" id="-qhzi5x_89">+</span> | <span class="control" id="-qhzi5x_90">New Run Script Action</span>:</p><figure id="-qhzi5x_86"><img alt="New run script action" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/xcode-new-run-script-action.png" title="New run script action" width="700" height="378"></figure></li><li class="list__item" id="-qhzi5x_74"><p id="-qhzi5x_91">Adjust the following script and add it as an action:</p><div class="code-block" data-lang="bash">
cd &quot;&lt;Path to the root of the multiplatform project&gt;&quot;
./gradlew :&lt;Shared module name&gt;:embedAndSignAppleFrameworkForXcode 
</div><ul class="list _bullet" id="-qhzi5x_93"><li class="list__item" id="-qhzi5x_94"><p>In the <code class="code" id="-qhzi5x_96">cd</code> command, specify the path to the root of your Kotlin Multiplatform project, for example, <code class="code" id="-qhzi5x_97">$SRCROOT/..</code>.</p></li><li class="list__item" id="-qhzi5x_95"><p>In the <code class="code" id="-qhzi5x_98">./gradlew</code> command, specify the name of the shared module, for example, <code class="code" id="-qhzi5x_99">:shared</code> or <code class="code" id="-qhzi5x_100">:composeApp</code>.</p></li></ul></li><li class="list__item" id="-qhzi5x_75"><p id="-qhzi5x_101">Choose your app's target in the <span class="control" id="-qhzi5x_103">Provide build settings from</span> section:</p><figure id="-qhzi5x_102"><img alt="Filled run script action" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/xcode-filled-run-script-action.png" title="Filled run script action" width="700" height="376"></figure></li><li class="list__item" id="-qhzi5x_76"><p id="-qhzi5x_104">You can now import the shared module into your local Swift package and use Kotlin code.</p><p id="-qhzi5x_105">In Xcode, navigate to your local Swift package and define a function with a module import, for example:</p><div class="code-block" data-lang="swift">
import Shared

public func greetingsFromSpmLocalPackage() -&gt; String {
    return Greeting.greet()
}
</div><figure id="-qhzi5x_107"><img alt="SPM usage" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/xcode-spm-usage.png" title="SPM usage" width="700" height="198"></figure></li><li class="list__item" id="-qhzi5x_77"><p id="-qhzi5x_108">In the <code class="code" id="-qhzi5x_110">ContentView.swift</code> file of your iOS project, you can now use this function by importing the local package:</p><div class="code-block" data-lang="swift">
import SwiftUI
import SpmLocalPackage

struct ContentView: View {
    var body: some View {
        Vstack {
            Image(systemName: &quot;globe&quot;)
                .imageScale(.large)
                .foregroundStyle(.tint)
            Text(greetingsFromSpmLocalPackage())
        }
        .padding()
    }
}

#Preview {
    ContentView()
}
</div></li><li class="list__item" id="-qhzi5x_78"><p id="-qhzi5x_111">Build the project in Xcode. If everything is set up correctly, the project build will be successful.</p></li></ol><p id="-qhzi5x_68">There are a couple more factors worth considering:</p><ul class="list _bullet" id="-qhzi5x_69"><li class="list__item" id="-qhzi5x_112"><p>If you have a custom build configuration that is different from the default <code class="code" id="-qhzi5x_114">Debug</code> or <code class="code" id="-qhzi5x_115">Release</code>, on the <span class="control" id="-qhzi5x_116">Build Settings</span> tab, add the <code class="code" id="-qhzi5x_117">KOTLIN_FRAMEWORK_BUILD_TYPE</code> setting under <span class="control" id="-qhzi5x_118">User-Defined</span> and set it to <code class="code" id="-qhzi5x_119">Debug</code> or <code class="code" id="-qhzi5x_120">Release</code>.</p></li><li class="list__item" id="-qhzi5x_113"><p>If you encounter an error with script sandboxing, open the iOS project settings by double-clicking the project name, then on the <span class="control" id="-qhzi5x_121">Build Settings</span> tab, disable the <span class="control" id="-qhzi5x_122">User Script Sandboxing</span> under <span class="control" id="-qhzi5x_123">Build Options</span>.</p></li></ul></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next</h2><ul class="list _bullet" id="-qhzi5x_124"><li class="list__item" id="-qhzi5x_125"><p><a href="multiplatform-ios-integration-overview.html" id="-qhzi5x_127">Choose your integration method</a></p></li><li class="list__item" id="-qhzi5x_126"><p><a href="multiplatform-spm-export.html" id="-qhzi5x_128">Learn how to set up Swift package export</a></p></li></ul></section><div class="last-modified">Last modified: 19 May 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="multiplatform-cocoapods-dsl-reference.html" class="navigation-links__prev">CocoaPods Gradle plugin DSL reference</a><a href="multiplatform-configure-compilations.html" class="navigation-links__next">Configure compilations</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.js"></script></body></html>