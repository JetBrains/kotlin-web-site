<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-25T13:01:21.629223439"><meta name="build-number" content="637"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Share code on platforms | Kotlin Multiplatform Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"share-code-on-all-platforms","level":0,"title":"Share code on all platforms","anchor":"#share-code-on-all-platforms"},{"id":"share-code-on-similar-platforms","level":0,"title":"Share code on similar platforms","anchor":"#share-code-on-similar-platforms"},{"id":"share-code-in-libraries","level":0,"title":"Share code in libraries","anchor":"#share-code-in-libraries"},{"id":"connect-platform-specific-libraries","level":0,"title":"Connect platform-specific libraries","anchor":"#connect-platform-specific-libraries"},{"id":"what-s-next","level":0,"title":"What\u0027s next?","anchor":"#what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><link rel="icon" type="image/x-icon" sizes="16x16" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"><link rel="icon" type="image/png" sizes="96x96" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"><link rel="icon" type="image/png" sizes="300x300" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"><link rel="icon" type="image/png" sizes="500x500" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Share code on platforms | Kotlin Multiplatform"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><meta property="og:site_name" content="Kotlin Multiplatform Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-share-on-platforms.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Share code on platforms | Kotlin Multiplatform"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-share-on-platforms.html#webpage",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-share-on-platforms.html",
    "name": "Share code on platforms | Kotlin Multiplatform",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/#website",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/",
    "name": "Kotlin Multiplatform Help"
}</script><!-- End Schema.org --><meta name="msapplication-TileColor" content="#000000"/>
<meta name="msapplication-TileImage"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/>
<meta name="msapplication-square70x70logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/>
<meta name="msapplication-square150x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/>
<meta name="msapplication-wide310x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/>
<meta name="msapplication-square310x310logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>
<script>document.cookie="wh_theme=light;expires="+(new Date(Date.now()+500000000).toUTCString())+"; path=/;";</script>
<style>
<!--slack icon-->
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]{position:relative;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"] svg{visibility:hidden;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]::before{
display:block;content:"";position:absolute;top:0;bottom:0;left:0;right:0;
background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M9.586 6.601h1.9v-1.9a1.837 1.837 0 00-1.9-1.9 1.9 1.9 0 000 3.8zm1.9 7.6v4.7a1.837 1.837 0 01-1.9 1.9 1.9 1.9 0 01-1.9-1.9v-4.7a1.899 1.899 0 011.9-1.9 1.837 1.837 0 011.9 1.9zm-5.864 1.773a1.839 1.839 0 01-.737.127 1.9 1.9 0 010-3.8h1.9v1.9a1.839 1.839 0 01-1.163 1.773zm3.963-4.673h-4.7a1.9 1.9 0 010-3.8h4.7a1.838 1.838 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9zm11.4-1.9a1.967 1.967 0 00-1.9-1.9 1.899 1.899 0 00-1.9 1.9v1.9h1.9a1.9 1.9 0 001.9-1.9zm-5.862 1.773a1.839 1.839 0 01-.738.127 1.9 1.9 0 01-1.9-1.9v-4.7a1.839 1.839 0 011.9-1.9 1.898 1.898 0 011.9 1.9v4.7a1.837 1.837 0 01-1.162 1.773zm-.738 9.628a1.839 1.839 0 001.9-1.9 1.9 1.9 0 00-1.9-1.9h-1.9v1.9a1.899 1.899 0 001.9 1.9zm4.7-4.7h-4.7a1.9 1.9 0 110-3.8h4.7a1.836 1.836 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9z"/></svg>') no-repeat center;background-size:20px 20px;}
[data-test="footer-socials"]+.jb-footer__legal{flex-basis:100%;margin-top:8px;}

<!--Drop any switches and set default theme-->
.wh-header__switchers{display:none!important}
</style></head><body data-id="multiplatform-share-on-platforms" data-main-title="Share code on platforms" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Share code" data-edit-url="https://github.com/JetBrains/kotlin-multiplatform-dev-docs/edit/master/topics/development/multiplatform-share-on-platforms.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin Multiplatform  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="multiplatform-share-on-platforms" id="multiplatform-share-on-platforms.md">Share code on platforms</h1><p id="-mv7mie_2">With Kotlin Multiplatform, you can share the code using the mechanisms Kotlin provides:</p><ul class="list _bullet" id="-mv7mie_3"><li class="list__item" id="-mv7mie_10"><p><a href="#share-code-on-all-platforms" id="-mv7mie_12">Share code among all platforms used in your project</a>. Use it for sharing the common business logic that applies to all platforms.</p></li><li class="list__item" id="-mv7mie_11"><p><a href="#share-code-on-similar-platforms" id="-mv7mie_13">Share code among some platforms</a> included in your project but not all. You can reuse code in similar platforms with a help of the hierarchical structure.</p></li></ul><p id="-mv7mie_4">If you need to access platform-specific APIs from the shared code, use the Kotlin mechanism of <a href="multiplatform-expect-actual.html" id="-mv7mie_14">expected and actual declarations</a>.</p><section class="chapter"><h2 id="share-code-on-all-platforms" data-toc="share-code-on-all-platforms">Share code on all platforms</h2><p id="-mv7mie_15">If you have business logic that is common for all platforms, you don't need to write the same code for each platform &ndash; just share it in the common source set.</p><figure id="-mv7mie_16"><img alt="Code shared for all platforms" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/flat-structure.svg" title="Code shared for all platforms" width="706" height="349"></figure><p id="-mv7mie_17">Some dependencies for source sets are set by default. You don't need to specify any <code class="code" id="-mv7mie_20">dependsOn</code> relations manually:</p><ul class="list _bullet" id="-mv7mie_18"><li class="list__item" id="-mv7mie_21"><p>For all platform-specific source sets that depend on the common source set, such as <code class="code" id="-mv7mie_23">jvmMain</code>, <code class="code" id="-mv7mie_24">macosX64Main</code>, and others.</p></li><li class="list__item" id="-mv7mie_22"><p>Between the <code class="code" id="-mv7mie_25">main</code> and <code class="code" id="-mv7mie_26">test</code> source sets of a particular target, such as <code class="code" id="-mv7mie_27">androidMain</code> and <code class="code" id="-mv7mie_28">androidUnitTest</code>.</p></li></ul><p id="-mv7mie_19">If you need to access platform-specific APIs from the shared code, use the Kotlin mechanism of <a href="multiplatform-expect-actual.html" id="-mv7mie_29">expected and actual declarations</a>.</p></section><section class="chapter"><h2 id="share-code-on-similar-platforms" data-toc="share-code-on-similar-platforms">Share code on similar platforms</h2><p id="-mv7mie_30">You often need to create several native targets that could potentially reuse a lot of the common logic and third-party APIs.</p><p id="-mv7mie_31">For example, in a typical multiplatform project targeting iOS, there are two iOS-related targets: one is for iOS ARM64 devices, the other is for the x64 simulator. They have separate platform-specific source sets, but in practice there is rarely a need for different code for the device and simulator, and their dependencies are much the same. So iOS-specific code could be shared between them.</p><p id="-mv7mie_32">Evidently, in this setup it would be desirable to have a shared source set for two iOS targets, with Kotlin/Native code that could still directly call any of the APIs that are common to both the iOS device and the simulator.</p><p id="-mv7mie_33">In this case, you can share code across native targets in your project using the <a href="multiplatform-hierarchy.html" id="-mv7mie_36">hierarchical structure</a> using one of the following ways:</p><ul class="list _bullet" id="-mv7mie_34"><li class="list__item" id="-mv7mie_37"><p><a href="multiplatform-hierarchy.html#default-hierarchy-template" id="-mv7mie_39">Using default hierarchy template</a></p></li><li class="list__item" id="-mv7mie_38"><p><a href="multiplatform-hierarchy.html#manual-configuration" id="-mv7mie_40">Configuring the hierarchical structure manually</a></p></li></ul><p id="-mv7mie_35">Learn more about <a href="#share-code-in-libraries" id="-mv7mie_41">sharing code in libraries</a> and <a href="#connect-platform-specific-libraries" id="-mv7mie_42">connecting platform-specific libraries</a>.</p></section><section class="chapter"><h2 id="share-code-in-libraries" data-toc="share-code-in-libraries">Share code in libraries</h2><p id="-mv7mie_43">Thanks to the hierarchical project structure, libraries can also provide common APIs for a subset of targets. When a <a href="multiplatform-publish-lib-setup.html" id="-mv7mie_47">library is published</a>, the API of its intermediate source sets is embedded into the library artifacts along with information about the project structure. When you use this library, the intermediate source sets of your project access only those APIs of the library which are available to the targets of each source set.</p><p id="-mv7mie_44">For example, check out the following source set hierarchy from the <code class="code" id="-mv7mie_48">kotlinx.coroutines</code> repository:</p><figure id="-mv7mie_45"><img alt="Library hierarchical structure" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/lib-hierarchical-structure.svg" title="Library hierarchical structure" width="706" height="421"></figure><p id="-mv7mie_46">The <code class="code" id="-mv7mie_49">concurrent</code> source set declares the function runBlocking and is compiled for the JVM and the native targets. Once the <code class="code" id="-mv7mie_50">kotlinx.coroutines</code> library is updated and published with the hierarchical project structure, you can depend on it and call <code class="code" id="-mv7mie_51">runBlocking</code> from a source set that is shared between the JVM and native targets since it matches the &quot;targets signature&quot; of the library's <code class="code" id="-mv7mie_52">concurrent</code> source set.</p></section><section class="chapter"><h2 id="connect-platform-specific-libraries" data-toc="connect-platform-specific-libraries">Connect platform-specific libraries</h2><p id="-mv7mie_53">To share more native code without being limited by platform-specific dependencies, use <a href="https://kotlinlang.org/docs/native-platform-libs.hml" id="-mv7mie_55" data-external="true" rel="noopener noreferrer">platform libraries</a>, like Foundation, UIKit, and POSIX. These libraries are shipped with Kotlin/Native and available in shared source sets by default.</p><p id="-mv7mie_54">In addition, if you use the <a href="multiplatform-cocoapods-overview.html" id="-mv7mie_56">Kotlin CocoaPods Gradle</a> plugin in your projects, you can work with third-party native libraries consumed with the <a href="https://kotlinlang.org/docs/native-c-interop.html" id="-mv7mie_57" data-external="true" rel="noopener noreferrer"><code class="code" id="-mv7mie_58">cinterop</code> mechanism</a>.</p></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next?</h2><ul class="list _bullet" id="-mv7mie_59"><li class="list__item" id="-mv7mie_60"><p><a href="multiplatform-expect-actual.html" id="-mv7mie_64">Read about the Kotlin's mechanism of expected and actual declarations</a></p></li><li class="list__item" id="-mv7mie_61"><p><a href="multiplatform-hierarchy.html" id="-mv7mie_65">Learn more about hierarchical project structure</a></p></li><li class="list__item" id="-mv7mie_62"><p><a href="multiplatform-publish-lib-setup.html" id="-mv7mie_66">Set up the publication of your multiplatform library</a></p></li><li class="list__item" id="-mv7mie_63"><p><a href="https://kotlinlang.org/docs/coding-conventions.html#source-file-names" id="-mv7mie_67" data-external="true" rel="noopener noreferrer">See our recommendations on naming source files in multiplatform projects</a></p></li></ul></section><div class="last-modified">Last modified: 16 May 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="multiplatform-project-configuration.html" class="navigation-links__prev">Choosing a configuration for your Kotlin Multiplatform project</a><a href="multiplatform-expect-actual.html" class="navigation-links__next">Expected and actual declarations</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.js"></script></body></html>