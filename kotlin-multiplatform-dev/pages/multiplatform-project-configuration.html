<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-06-25T13:01:21.065759369"><meta name="build-number" content="637"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Choosing a configuration for your Kotlin Multiplatform project | Kotlin Multiplatform Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"connect-a-kotlin-multiplatform-module-to-an-ios-app","level":0,"title":"Connect a Kotlin Multiplatform module to an iOS app","anchor":"#connect-a-kotlin-multiplatform-module-to-an-ios-app"},{"id":"module-configurations","level":0,"title":"Module configurations","anchor":"#module-configurations"},{"id":"repository-configurations","level":0,"title":"Repository configurations","anchor":"#repository-configurations"},{"id":"code-sharing-workflow","level":0,"title":"Code sharing workflow","anchor":"#code-sharing-workflow"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><link rel="icon" type="image/x-icon" sizes="16x16" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"><link rel="icon" type="image/png" sizes="96x96" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"><link rel="icon" type="image/png" sizes="300x300" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"><link rel="icon" type="image/png" sizes="500x500" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Choosing a configuration for your Kotlin Multiplatform project | Kotlin Multiplatform"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><meta property="og:site_name" content="Kotlin Multiplatform Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-project-configuration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Choosing a configuration for your Kotlin Multiplatform project | Kotlin Multiplatform"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-project-configuration.html#webpage",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-project-configuration.html",
    "name": "Choosing a configuration for your Kotlin Multiplatform project | Kotlin Multiplatform",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/#website",
    "url": "https://www.jetbrains.com/help/kotlin-multiplatform-dev/",
    "name": "Kotlin Multiplatform Help"
}</script><!-- End Schema.org --><meta name="msapplication-TileColor" content="#000000"/>
<meta name="msapplication-TileImage"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/>
<meta name="msapplication-square70x70logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/>
<meta name="msapplication-square150x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/>
<meta name="msapplication-wide310x150logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/>
<meta name="msapplication-square310x310logo"
      content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>
<script>document.cookie="wh_theme=light;expires="+(new Date(Date.now()+500000000).toUTCString())+"; path=/;";</script>
<style>
<!--slack icon-->
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]{position:relative;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"] svg{visibility:hidden;}
[data-test="footer-socials"] [data-test="button"][title*="Kotlin Multiplatform Development Feed"]::before{
display:block;content:"";position:absolute;top:0;bottom:0;left:0;right:0;
background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="%23fff"><path d="M9.586 6.601h1.9v-1.9a1.837 1.837 0 00-1.9-1.9 1.9 1.9 0 000 3.8zm1.9 7.6v4.7a1.837 1.837 0 01-1.9 1.9 1.9 1.9 0 01-1.9-1.9v-4.7a1.899 1.899 0 011.9-1.9 1.837 1.837 0 011.9 1.9zm-5.864 1.773a1.839 1.839 0 01-.737.127 1.9 1.9 0 010-3.8h1.9v1.9a1.839 1.839 0 01-1.163 1.773zm3.963-4.673h-4.7a1.9 1.9 0 010-3.8h4.7a1.838 1.838 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9zm11.4-1.9a1.967 1.967 0 00-1.9-1.9 1.899 1.899 0 00-1.9 1.9v1.9h1.9a1.9 1.9 0 001.9-1.9zm-5.862 1.773a1.839 1.839 0 01-.738.127 1.9 1.9 0 01-1.9-1.9v-4.7a1.839 1.839 0 011.9-1.9 1.898 1.898 0 011.9 1.9v4.7a1.837 1.837 0 01-1.162 1.773zm-.738 9.628a1.839 1.839 0 001.9-1.9 1.9 1.9 0 00-1.9-1.9h-1.9v1.9a1.899 1.899 0 001.9 1.9zm4.7-4.7h-4.7a1.9 1.9 0 110-3.8h4.7a1.836 1.836 0 011.9 1.9 1.9 1.9 0 01-1.9 1.9z"/></svg>') no-repeat center;background-size:20px 20px;}
[data-test="footer-socials"]+.jb-footer__legal{flex-basis:100%;margin-top:8px;}

<!--Drop any switches and set default theme-->
.wh-header__switchers{display:none!important}
</style></head><body data-id="multiplatform-project-configuration" data-main-title="Choosing a configuration for your Kotlin Multiplatform project" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Explore project structure" data-edit-url="https://github.com/JetBrains/kotlin-multiplatform-dev-docs/edit/master/topics/development/multiplatform-project-configuration.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin Multiplatform  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="multiplatform-project-configuration" id="multiplatform-project-configuration.md">Choosing a configuration for your Kotlin Multiplatform project</h1><p id="rgm5xa_2">When you add Kotlin Multiplatform to an existing project or start a new one, there are different ways to structure your code. Typically, you create one or more Kotlin Multiplatform shared modules and use them from your Android and iOS apps.</p><p id="rgm5xa_3">To choose the best approach for your specific case, consider the following questions:</p><ul class="list _bullet" id="rgm5xa_4"><li class="list__item" id="rgm5xa_10"><p><a href="#connect-a-kotlin-multiplatform-module-to-an-ios-app" id="rgm5xa_14">How do you consume an iOS framework generated by a Kotlin Multiplatform module from the iOS app?</a> Do you integrate it directly, through CocoaPods, or by using the Swift package manager (SPM)?</p></li><li class="list__item" id="rgm5xa_11"><p><a href="#module-configurations" id="rgm5xa_15">Do you have one or several Kotlin Multiplatform shared modules?</a> What should be an umbrella module for several shared modules?</p></li><li class="list__item" id="rgm5xa_12"><p><a href="#repository-configurations" id="rgm5xa_16">Do you store all of the code in a monorepo or in different repositories?</a></p></li><li class="list__item" id="rgm5xa_13"><p><a href="#code-sharing-workflow" id="rgm5xa_17">Do you consume a Kotlin Multiplatform module framework as a local or remote dependency?</a></p></li></ul><p id="rgm5xa_5">Answering these questions will help you pick the best configuration for your project.</p><section class="chapter"><h2 id="connect-a-kotlin-multiplatform-module-to-an-ios-app" data-toc="connect-a-kotlin-multiplatform-module-to-an-ios-app">Connect a Kotlin Multiplatform module to an iOS app</h2><p id="rgm5xa_18">To use a Kotlin Multiplatform shared module from an iOS app, you first need to generate an <a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WhatAreFrameworks.html" id="rgm5xa_23" data-external="true" rel="noopener noreferrer">iOS framework</a> from this shared module. Then, you should add it as a dependency to the iOS project:</p><figure id="rgm5xa_19"><img alt="Kotlin Multiplatform shared module" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/kmp-shared-module.svg" title="Kotlin Multiplatform shared module" width="700" height="700"></figure><p id="rgm5xa_20">It's possible to consume this framework as a local or remote dependency.</p><p id="rgm5xa_21">You can add a dependency on a Kotlin Multiplatform module framework to the iOS project in one of the following ways:</p><ul class="list _bullet" id="rgm5xa_22"><li class="list__item" id="rgm5xa_24"><p id="rgm5xa_27"><span class="control" id="rgm5xa_29">Direct integration</span>. You connect the framework directly by adding a new run script phase to the build of the iOS app. See <a href="multiplatform-integrate-in-existing-app.html#configure-the-ios-project-to-use-a-kmp-framework" id="rgm5xa_30">Connect the framework to your iOS project</a> to learn how to do that in Xcode.</p><p id="rgm5xa_28">When you create a project with the Android Studio wizard, choose the <span class="control" id="rgm5xa_31">Regular framework</span> option to have this setup generated automatically.</p></li><li class="list__item" id="rgm5xa_25"><p id="rgm5xa_32"><span class="control" id="rgm5xa_34">CocoaPods integration</span>. You connect a framework through <a href="https://cocoapods.org/" id="rgm5xa_35" data-external="true" rel="noopener noreferrer">CocoaPods</a>, a popular dependency manager for Swift and Objective-C projects. It can be either a local or remote dependency. For more information, see <a href="multiplatform-cocoapods-xcode.html" id="rgm5xa_36">Use a Kotlin Gradle project as a CocoaPods dependency</a>.</p><p id="rgm5xa_33">To set up a workflow with a local CocoaPods dependency, you can either generate the project with a wizard, or edit the scripts manually.</p></li><li class="list__item" id="rgm5xa_26"><p id="rgm5xa_37"><span class="control" id="rgm5xa_38">Using SPM</span>. You connect a framework using the Swift package manager (SPM), an Apple tool for managing the distribution of Swift code. We're <a href="https://youtrack.jetbrains.com/issue/KT-53877" id="rgm5xa_39" data-external="true" rel="noopener noreferrer">working on official support for SPM</a>. Currently, you can set up a dependency on a Swift package using XCFrameworks. For more information, see <a href="multiplatform-spm-export.html" id="rgm5xa_40">Swift package export setup</a>.</p></li></ul></section><section class="chapter"><h2 id="module-configurations" data-toc="module-configurations">Module configurations</h2><p id="rgm5xa_41">There are two module configuration options that you can use in Kotlin Multiplatform projects: single module or several shared modules.</p><section class="chapter"><h3 id="single-shared-module" data-toc="single-shared-module">Single shared module</h3><p id="rgm5xa_44">The simplest module configuration contains only a single shared Kotlin Multiplatform module in the project:</p><figure id="rgm5xa_45"><img alt="Single shared module" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/single-shared-module.svg" title="Single shared module" width="700" height="700"></figure><p id="rgm5xa_46">The Android app can depend on the Kotlin Multiplatform shared module as a regular Kotlin module. However, iOS can't use Kotlin directly, so the iOS app must depend on the iOS framework generated by the Kotlin Multiplatform module.</p><div class="table-wrapper"><table class="wide" id="rgm5xa_47"><thead><tr class="ijRowHead" id="rgm5xa_48"><th id="rgm5xa_50"><p>Pros</p></th><th id="rgm5xa_51"><p>Cons</p></th></tr></thead><tbody><tr id="rgm5xa_49"><td id="rgm5xa_52"><ul class="list _bullet" id="rgm5xa_54"><li class="list__item" id="rgm5xa_55"><p>A simple design with just a single module reduces cognitive load. You don't need to think about where to put your functionality or how to split it logically into parts.</p></li><li class="list__item" id="rgm5xa_56"><p>Works great as a starting point.</p></li></ul></td><td id="rgm5xa_53"><ul class="list _bullet" id="rgm5xa_57"><li class="list__item" id="rgm5xa_58"><p>Compilation time increases as the shared module grows.</p></li><li class="list__item" id="rgm5xa_59"><p>This design doesn't allow having separate features or having dependencies only on the features the app needs.</p></li></ul></td></tr></tbody></table></div></section><section class="chapter"><h3 id="several-shared-modules" data-toc="several-shared-modules">Several shared modules</h3><p id="rgm5xa_60">As your shared module grows, it's a good idea to break it into feature modules. This helps you avoid the scalability issues related to having just one module.</p><p id="rgm5xa_61">The Android app can depend on all feature modules directly, or only on some of them if necessary.</p><p id="rgm5xa_62">The iOS app can depend on one framework generated by the Kotlin Multiplatform module. When you use several modules, you need to add an extra module depending on all of the modules you're using, called an <span class="emphasis" id="rgm5xa_72">umbrella module</span>, and then you need to configure a framework containing all of the modules, called an <span class="emphasis" id="rgm5xa_73">umbrella framework</span>.</p><aside class="prompt" data-type="tip" data-title="" id="rgm5xa_63"><p id="rgm5xa_74">The umbrella framework bundle contains all of the project's shared modules and is imported into the iOS app.</p></aside><div class="table-wrapper"><table class="wide" id="rgm5xa_64"><thead><tr class="ijRowHead" id="rgm5xa_75"><th id="rgm5xa_77"><p>Pros</p></th><th id="rgm5xa_78"><p>Cons</p></th></tr></thead><tbody><tr id="rgm5xa_76"><td id="rgm5xa_79"><ul class="list _bullet" id="rgm5xa_81"><li class="list__item" id="rgm5xa_82"><p>Separation of concerns for shared code.</p></li><li class="list__item" id="rgm5xa_83"><p>Better scalability.</p></li></ul></td><td id="rgm5xa_80"><ul class="list _bullet" id="rgm5xa_84"><li class="list__item" id="rgm5xa_85"><p>More complicated setup, including the umbrella framework setup.</p></li><li class="list__item" id="rgm5xa_86"><p>More involved dependency management across modules.</p></li></ul></td></tr></tbody></table></div><p id="rgm5xa_65">To set up an umbrella module, you add a separate module that depends on all feature modules and generate a framework from this module:</p><figure id="rgm5xa_66"><img alt="Umbrella framework" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/umbrella-framework.svg" title="Umbrella framework" width="700" height="700"></figure><p id="rgm5xa_67">The Android app can either depend on the umbrella module for consistency or on separate feature modules. An umbrella module often contains useful utility functions and dependency injection setup code.</p><p id="rgm5xa_68">You can export only some of the modules to the umbrella framework, typically when the framework artifact is consumed as a remote dependency. The main reason for this is to keep the size of the final artifact down by making sure auto-generated code is excluded.</p><p id="rgm5xa_69">A known constraint of the umbrella framework approach is that the iOS app can't use only some of the feature modules &ndash; it automatically consumes all of them. For possible improvements to this functionality, describe your case in <a href="https://youtrack.jetbrains.com/issue/KT-42247" id="rgm5xa_87" data-external="true" rel="noopener noreferrer">KT-42247</a> and <a href="https://youtrack.jetbrains.com/issue/KT-42250" id="rgm5xa_88" data-external="true" rel="noopener noreferrer">KT-42250</a>.</p><aside class="prompt" data-type="tip" data-title="" id="rgm5xa_70"><p id="rgm5xa_89">When you see that an iOS app depends on an umbrella module in the examples below, it means that it also depends on the umbrella framework generated from this module.</p></aside><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="why-do-you-need-an-umbrella-framework" data-toc="why-do-you-need-an-umbrella-framework">Why do you need an umbrella framework?</h4></div><div class="collapse__content"><p id="rgm5xa_90">While it's possible to include several frameworks generated from different Kotlin Multiplatform shared modules in your iOS app, we do not recommend this approach. When a Kotlin Multiplatform module is compiled into a framework, the resulting framework includes all of its dependencies. Whenever two or more modules use the same dependency and are exposed to iOS as separate frameworks, the Kotlin/Native compiler duplicates the dependencies.</p><p id="rgm5xa_91">This duplication causes a number of issues. First, the iOS app size is unnecessarily inflated. Second, a dependency's code structure is incompatible with the duplicated dependency's code structure. This creates a problem when trying to integrate two modules with the same dependencies within the iOS application. For instance, any state passed by different modules through the same dependency won't be connected. This can lead to unexpected behavior and bugs. See the <a href="https://touchlab.co/multiple-kotlin-frameworks-in-application/" id="rgm5xa_94" data-external="true" rel="noopener noreferrer">TouchLab documentation</a> for more details on the exact limitations.</p><p id="rgm5xa_92">Kotlin doesn't produce common framework dependencies because otherwise there would be duplication, and any Kotlin binary you add to your app needs to be as small as possible. Including the whole Kotlin runtime and all of the code from all dependencies is wasteful. The Kotlin compiler is able to trim the binary to exactly what it needs for a particular build. However, it doesn't know what other builds might need, so trying to share dependencies is unfeasible. We're exploring various options to minimize the effects of this issue.</p><p id="rgm5xa_93">The solution to this problem is to use an umbrella framework. It prevents the bloating of the iOS app with duplicated dependencies, helps optimize the resulting artifact, and eliminates the frustrations caused by incompatibilities between dependencies.</p></div></div></section></section></section><section class="chapter"><h2 id="repository-configurations" data-toc="repository-configurations">Repository configurations</h2><p id="rgm5xa_95">There are a number of repository configuration options that you can use in new and existing Kotlin Multiplatform projects, using one repository or a combination of several repositories.</p><section class="chapter"><h3 id="monorepo-everything-in-one-repository" data-toc="monorepo-everything-in-one-repository">Monorepo: everything in one repository</h3><p id="rgm5xa_100">A common repository configuration is called a monorepo configuration. This approach is used in Kotlin Multiplatform samples and tutorials. In this case, the repository contains both Android and iOS apps, as well as the shared module or several modules, including the umbrella module:</p><figure id="rgm5xa_101"><img alt="Monorepo configuration" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/monorepo-configuration-1.svg" title="Monorepo configuration" width="700" height="395"></figure><figure id="rgm5xa_102"><img alt="Monorepo configuration" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/monorepo-configuration-2.svg" title="Monorepo configuration" width="700" height="395"></figure><p id="rgm5xa_103">Typically, the iOS app consumes the Kotlin Multiplatform shared module as a regular framework by using direct or CocoaPods integration. See <a href="#connect-a-kotlin-multiplatform-module-to-an-ios-app" id="rgm5xa_107">Connecting Kotlin Multiplatform module to iOS app</a> for more details and links to tutorials.</p><p id="rgm5xa_104">If the repository is under version control, the apps and the shared module have the same version.</p><div class="table-wrapper"><table class="wide" id="rgm5xa_105"><thead><tr class="ijRowHead" id="rgm5xa_108"><th id="rgm5xa_110"><p>Pros</p></th><th id="rgm5xa_111"><p>Cons</p></th></tr></thead><tbody><tr id="rgm5xa_109"><td id="rgm5xa_112"><ul class="list _bullet" id="rgm5xa_114"><li class="list__item" id="rgm5xa_115"><p>Easy to set up with the help of wizards.</p></li><li class="list__item" id="rgm5xa_116"><p>iOS developers can easily work with Kotlin Multiplatform code since all of the code is located in the same repository.</p></li></ul></td><td id="rgm5xa_113"><ul class="list _bullet" id="rgm5xa_117"><li class="list__item" id="rgm5xa_118"><p>iOS developers need to set up and configure unfamiliar tools.</p></li><li class="list__item" id="rgm5xa_119"><p>This approach often doesn't work for existing apps already stored in different repositories.</p></li></ul></td></tr></tbody></table></div><p id="rgm5xa_106">When the existing Android and iOS apps are already stored in different repositories, you can add the Kotlin Multiplatform part to an Android repository or to a separate repository, instead of merging them.</p></section><section class="chapter"><h3 id="two-repositories-android-shared-ios" data-toc="two-repositories-android-shared-ios">Two repositories: Android + shared | iOS</h3><p id="rgm5xa_120">Another project configuration is having two repositories. In this case, the Kotlin Multiplatform repository contains both the Android app and the shared module, including the umbrella module, while the Xcode project contains the iOS app:</p><figure id="rgm5xa_121"><img alt="Two repository configuration" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/two-repositories.svg" title="Two repository configuration" width="700" height="395"></figure><p id="rgm5xa_122">The Android and iOS apps can be versioned separately, and the shared module is versioned along with the Android app.</p></section><section class="chapter"><h3 id="three-repositories-android-ios-shared" data-toc="three-repositories-android-ios-shared">Three repositories: Android | iOS | shared</h3><p id="rgm5xa_123">One more option is having a separate repository for the Kotlin Multiplatform modules. In this case, the Android and iOS apps are stored in separate repositories, and the project's shared code can contain multiple feature modules and the umbrella module for iOS:</p><figure id="rgm5xa_124"><img alt="Three repository configuration" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/three-repositories.svg" title="Three repository configuration" width="700" height="440"></figure><p id="rgm5xa_125">Each project can be versioned separately. Kotlin Multiplatform modules must also be versioned and published for the Android or JVM platforms. You can either publish feature modules independently or publish only the umbrella module and make the Android app depend on it.</p><p id="rgm5xa_126">Publishing Android artifacts separately can present additional complexity for Android developers compared to project scenarios where the Kotlin Multiplatform modules are part of the Android project.</p><p id="rgm5xa_127">When both Android and iOS teams consume the same versioned artifacts, they operate in version parity. From a team perspective, this avoids the impression that the shared Kotlin Multiplatform code is &quot;owned&quot; by the Android developers. For large projects that already publish versioned internal Kotlin and Swift packages for feature development, publishing the shared Kotlin artifacts becomes a part of the existing workflow.</p></section><section class="chapter"><h3 id="many-repositories-android-ios-multiple-libraries" data-toc="many-repositories-android-ios-multiple-libraries">Many repositories: Android | iOS | multiple libraries</h3><p id="rgm5xa_128">When functionality should be shared between multiple apps on multiple platforms, you might prefer having many repositories with Kotlin Multiplatform code. For example, you can store a logging library, which is common for the whole product, in a separate repository with its own versioning.</p><p id="rgm5xa_129">In this case, you have multiple Kotlin Multiplatform library repositories. If several iOS apps use different subsets of &quot;library projects&quot;, each app can have an additional repository containing the umbrella module with the necessary dependencies on the library projects:</p><figure id="rgm5xa_130"><img alt="Many repository configuration" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/many-repositories.svg" title="Many repository configuration" width="700" height="395"></figure><p id="rgm5xa_131">Here, each library must be versioned and published for the Android or JVM platforms, as well. The apps and each library can be versioned separately.</p></section></section><section class="chapter"><h2 id="code-sharing-workflow" data-toc="code-sharing-workflow">Code sharing workflow</h2><p id="rgm5xa_132">The iOS app can consume a framework generated from the Kotlin Multiplatform shared modules as a <span class="emphasis" id="rgm5xa_135">local</span> or <span class="emphasis" id="rgm5xa_136">remote</span> dependency. You can use a local dependency by providing a local path to the framework in the iOS build. In this case, you don't need to publish the framework. Alternatively, you can publish an artifact with the framework somewhere and make the iOS app consume it as a remote dependency, like any other third-party dependency.</p><section class="chapter"><h3 id="local-source-distribution" data-toc="local-source-distribution">Local: source distribution</h3><p id="rgm5xa_137">Local distribution is where the iOS app consumes a Kotlin Multiplatform module framework without the need for publishing. The iOS app can either integrate the framework directly or by using CocoaPods.</p><p id="rgm5xa_138">This workflow is typically used when both Android and iOS team members want to edit the shared Kotlin Multiplatform code. The iOS developers need to install Android Studio and have a basic knowledge of Kotlin and Gradle.</p><p id="rgm5xa_139">In the local distribution scheme, the iOS app build triggers the generation of the iOS framework. This means that iOS developers can observe their changes to Kotlin Multiplatform code right away:</p><figure id="rgm5xa_140"><img alt="Local source distribution" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/local-source-distribution.svg" title="Local source distribution" width="700" height="700"></figure><p id="rgm5xa_141">This scenario is typically used in two cases. First, it can be used in monorepo project configurations as the default workflow, without the need to publish artifacts. Second, it can be used for local development, in addition to the remote workflow. See <a href="#setting-up-a-local-dependency-for-local-development" id="rgm5xa_144">Setting up a local dependency for local development</a> for more details.</p><p id="rgm5xa_142">This workflow is most effective when all of the team members are ready to edit code in the whole project. It includes both Android and iOS parts after making changes to the common parts. Ideally, every team member can have Android Studio and Xcode installed to open and run both apps after making changes to the common code.</p><div class="table-wrapper"><table class="wide" id="rgm5xa_143"><thead><tr class="ijRowHead" id="rgm5xa_145"><th id="rgm5xa_147"><p>Pros</p></th><th id="rgm5xa_148"><p>Cons</p></th></tr></thead><tbody><tr id="rgm5xa_146"><td id="rgm5xa_149"><ul class="list _bullet" id="rgm5xa_151"><li class="list__item" id="rgm5xa_152"><p>Both Android and iOS team members can easily edit Kotlin Multiplatform code, ensuring that creating and maintaining shared code is a shared responsibility. This helps prevent teams' isolation and encourages collaboration.</p></li><li class="list__item" id="rgm5xa_153"><p>This approach doesn't require separate versioning and publishing of the shared code.</p></li><li class="list__item" id="rgm5xa_154"><p>The development workflow is quicker, as iOS team members don't have to wait for artifacts to be created and published.</p></li></ul></td><td id="rgm5xa_150"><ul class="list _bullet" id="rgm5xa_155"><li class="list__item" id="rgm5xa_156"><p>Team members need to set up a full development environment on their machines.</p></li><li class="list__item" id="rgm5xa_157"><p>iOS developers have to learn how to use Android Studio and Gradle.</p></li><li class="list__item" id="rgm5xa_158"><p>Managing changes becomes difficult as more code is shared and the team grows.</p></li></ul></td></tr></tbody></table></div></section><section class="chapter"><h3 id="remote-artifact-distribution" data-toc="remote-artifact-distribution">Remote: artifact distribution</h3><p id="rgm5xa_159">Remote distribution means that the framework artifact is published as a CocoaPod or Swift package using SPM and consumed by the iOS app. The Android app may consume the binary dependency either locally or remotely.</p><p id="rgm5xa_160">Remote distribution is often used to gradually introduce the technology to existing projects. It doesn't significantly change the workflow and build processes for iOS developers. Teams with two or more repositories mainly use remote distribution to store project code.</p><p id="rgm5xa_161">As a start, you may want to use <a href="https://touchlab.co/trykmmbridge" id="rgm5xa_165" data-external="true" rel="noopener noreferrer">KMMBridge</a> &ndash; a set of build tools that greatly simplifies the remote distribution workflow. Alternatively, you can always set up a similar workflow on your own:</p><figure id="rgm5xa_162"><img alt="Remote artifact distribution" src="https://resources.jetbrains.com/help/img/kotlin-multiplatform-dev/remote-artifact-distribution.svg" title="Remote artifact distribution" width="700" height="395"></figure><div class="table-wrapper"><table class="wide" id="rgm5xa_163"><thead><tr class="ijRowHead" id="rgm5xa_166"><th id="rgm5xa_168"><p>Pros</p></th><th id="rgm5xa_169"><p>Cons</p></th></tr></thead><tbody><tr id="rgm5xa_167"><td id="rgm5xa_170"><p>Non-participating iOS team members don't have to code in Kotlin or learn how to use tools like Android Studio and Gradle. This lowers the barrier of entry for the team significantly.</p></td><td id="rgm5xa_171"><ul class="list _bullet" id="rgm5xa_172"><li class="list__item" id="rgm5xa_173"><p>Slower workflow for iOS developers, as the process of editing and building the shared code involves publishing and versioning.</p></li><li class="list__item" id="rgm5xa_174"><p>Debugging shared Kotlin code is difficult on iOS.</p></li><li class="list__item" id="rgm5xa_175"><p>The likelihood of iOS team members contributing to shared code significantly decreases.</p></li><li class="list__item" id="rgm5xa_176"><p>The maintenance of the shared code rests entirely on participating team members.</p></li></ul></td></tr></tbody></table></div><section class="chapter"><h4 id="setting-up-a-local-dependency-for-local-development" data-toc="setting-up-a-local-dependency-for-local-development">Setting up a local dependency for local development</h4><p id="rgm5xa_177">Many teams choose remote distribution workflows when adopting Kotlin Multiplatform technology to keep the development process the same for iOS developers. However, it's hard for them to change Kotlin Multiplatform code in this workflow. We recommend setting up an additional &quot;local development&quot; workflow with a local dependency on a framework generated from the Kotlin Multiplatform module.</p><p id="rgm5xa_178">When developers add new functionality, they switch to consuming the Kotlin Multiplatform module as a local dependency. That allows making changes to common Kotlin code, immediately observing the behavior from iOS, and debugging Kotlin code. When the functionality is ready, they can switch back to the remote dependency and publish their changes accordingly. First, they publish changes to the shared modules, and only after that do they make changes to the apps.</p><p id="rgm5xa_179">For remote distribution workflows, use either CocoaPods integration or SPM. For local distribution workflow, integrate the framework directly.</p><p id="rgm5xa_180">If you use CocoaPods, you can alternatively use CocoaPods for local distribution workflow. You switch between them by changing the environmental variable as described in the <a href="https://touchlab.co/kmmbridgecocoapodslocal" id="rgm5xa_181" data-external="true" rel="noopener noreferrer">TouchLab documentation</a>.</p></section></section></section><div class="last-modified">Last modified: 16 May 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="multiplatform-advanced-project-structure.html" class="navigation-links__prev">Advanced concepts of the multiplatform project structure</a><a href="multiplatform-share-on-platforms.html" class="navigation-links__next">Share code on platforms</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b454/app.js"></script></body></html>